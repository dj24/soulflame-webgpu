<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>soulflame-webgpu</title><meta name="description" content="Documentation for soulflame-webgpu"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">soulflame-webgpu</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>soulflame-webgpu</h2></div><div class="tsd-panel tsd-typography"><p><img src="logo.png" alt="Image"></p>
<p><a href="https://dj24.github.io/soulflame-webgpu/">Deployed Demo</a></p>
<p><a href="https://dj24.github.io/soulflame-webgpu/docs/">Docs</a></p>
<p><img src="test-scene.png" alt="Image"></p>
<a id="md:getting-started" class="tsd-anchor"></a><h2><a href="#md:getting-started">Getting Started</a></h2><p>After cloning the repo run <code>npm install</code>, followed by <code>npm run serve</code> to start the development server on <code>localhost:8080</code>.</p>
<a id="md:project-structure" class="tsd-anchor"></a><h2><a href="#md:project-structure">Project Structure</a></h2><a id="md:asset-workflow" class="tsd-anchor"></a><h3><a href="#md:asset-workflow">Asset Workflow</a></h3><p>Currently, only <code>.vxm</code> (<a href="https://www.sandbox.game/en/create/vox-edit/">VoxEdit</a>) files are supported. <code>.vox</code> (<a href="https://ephtracy.github.io/">MagicaVoxel</a>) support is planned.</p>
<ol>
<li>Add <code>.vxm</code> files to the public directory.</li>
<li>Get this file as an <code>ArrayBuffer</code>, via a fetch request or similar</li>
</ol>
<pre><code class="language-typescript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">fetch</span><span class="hl-1">(</span><span class="hl-5">&#39;path/to/file.vxm&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">voxelsArrayBuffer</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-6">response</span><span class="hl-1">.</span><span class="hl-4">arrayBuffer</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<ol start="3">
<li>Convert the <code>ArrayBuffer</code> to an object of <code>TVoxels</code> type via <a href="src/convert-vxm.ts"><code>convertVxm</code></a></li>
</ol>
<pre><code class="language-typescript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">voxels</span><span class="hl-1"> = </span><span class="hl-4">convertVxm</span><span class="hl-1">(</span><span class="hl-6">voxelsArrayBuffer</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<ol start="5">
<li>Create a <a href="https://developer.mozilla.org/en-US/docs/Web/API/GPUTexture">GPUTexture</a> using <a href="src/create-texture-from-voxels.ts"><code>createTextureFromVoxels</code></a></li>
</ol>
<pre><code class="language-typescript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">voxelTexture</span><span class="hl-1"> = </span><span class="hl-4">createTextureFromVoxels</span><span class="hl-1">(</span><span class="hl-6">device</span><span class="hl-1">, </span><span class="hl-6">voxels</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<ol start="6">
<li>Add the texture to a <a href="src/volume-atlas.ts"><code>VolumeAtlas</code></a></li>
</ol>
<pre><code class="language-typescript"><span class="hl-6">volumeAtlas</span><span class="hl-1">.</span><span class="hl-4">addVolume</span><span class="hl-1">(</span><span class="hl-6">voxelTexture</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:volume-atlas" class="tsd-anchor"></a><h3><a href="#md:volume-atlas">Volume Atlas</a></h3><p>The <code>VolumeAtlas</code> class is a container for multiple 3D textures. It is used to store all the voxel models in the scene.</p>
<p>This means that only one texture binding is required for all the voxel models in the scene, which is useful especially for scenarios requires ray tracing of the scene. This also reduces the memory footprint for repeated instances of objects</p>
<p>Currently, textures are packed along the x-axis of the atlas. This means that the maximum number of textures that can be stored in the atlas is limited by the maximum texture size supported by the GPU.
In future, the atlas will be able to store textures in a 3D grid, allowing for more textures to be stored.</p>
<a id="md:render-loop" class="tsd-anchor"></a><h3><a href="#md:render-loop">Render Loop</a></h3><p>TODO</p>
<a id="md:rendering" class="tsd-anchor"></a><h2><a href="#md:rendering">Rendering</a></h2><p>Soulflame uses a deferred WebGPU renderer to render voxel models. Ray tracing is used to render the scene.</p>
<a id="md:gbuffer-layout" class="tsd-anchor"></a><h3><a href="#md:gbuffer-layout">GBuffer Layout</a></h3><p>TODO</p>
<a id="md:audio" class="tsd-anchor"></a><h2><a href="#md:audio">Audio</a></h2><p>TODO</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:getting-started"><span>Getting <wbr/>Started</span></a><a href="#md:project-structure"><span>Project <wbr/>Structure</span></a><ul><li><a href="#md:asset-workflow"><span>Asset <wbr/>Workflow</span></a></li><li><a href="#md:volume-atlas"><span>Volume <wbr/>Atlas</span></a></li><li><a href="#md:render-loop"><span>Render <wbr/>Loop</span></a></li></ul><a href="#md:rendering"><span>Rendering</span></a><ul><li><a href="#md:gbuffer-layout"><span>GBuffer <wbr/>Layout</span></a></li></ul><a href="#md:audio"><span>Audio</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>soulflame-webgpu</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>