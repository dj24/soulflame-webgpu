(()=>{"use strict";var r,e,t={136:(r,e,t)=>{var a=t(416);class n{transform;inverseTransform;size;constructor(r,e){this.transform=r,this.size=e,this.inverseTransform=a._E.create(),a._E.invert(this.transform,this.inverseTransform)}get worldSpaceBounds(){let r=a.R3.create(),e=a.R3.create();return a.R3.transformMat4(a.R3.create(),this.transform,r),a.R3.transformMat4(this.size,this.transform,e),{minBound:r,maxBound:e}}get worldSpaceCenter(){return a.R3.lerp(this.worldSpaceBounds.minBound,this.worldSpaceBounds.maxBound,.5)}toArray(){return[...this.inverseTransform,...this.size,0]}}const s=self;s.onmessage=r=>{const e=(({maxObjectCount:r,objectCount:e,scale:t,translateX:s,camera:o,objectSize:i})=>{const c=i[0]+16,l=i[2]+16;let p=[...Array(r).keys()].map((r=>{let e=a._E.identity(),o=r%12*c,p=Math.floor(r/12)*l,u=20*Math.sin(o+p);return a._E.translate(e,[s+o,u,p],e),a._E.translate(e,a.R3.divScalar(i,2),e),a._E.scale(e,[t,t,t],e),a._E.translate(e,a.R3.divScalar(i,-2),e),new n(e,i)}));p=p.sort(((r,e)=>a.R3.distance(r.worldSpaceCenter,o.position)-a.R3.distance(e.worldSpaceCenter,o.position)));let u=p;u=u.filter(((r,t)=>t<=e)),u=u.slice(0,e);const f=[...Array(r-u.length).keys()].map((()=>new n(a._E.identity(),[0,0,0])));return p=[...u,...f],p})(r.data).flatMap((r=>r.toArray()));s.postMessage(e)}}},a={};function n(r){var e=a[r];if(void 0!==e)return e.exports;var s=a[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.m=t,n.x=()=>{var r=n.O(void 0,[416],(()=>n(136)));return n.O(r)},r=[],n.O=(e,t,a,s)=>{if(!t){var o=1/0;for(p=0;p<r.length;p++){for(var[t,a,s]=r[p],i=!0,c=0;c<t.length;c++)(!1&s||o>=s)&&Object.keys(n.O).every((r=>n.O[r](t[c])))?t.splice(c--,1):(i=!1,s<o&&(o=s));if(i){r.splice(p--,1);var l=a();void 0!==l&&(e=l)}}return e}s=s||0;for(var p=r.length;p>0&&r[p-1][2]>s;p--)r[p]=r[p-1];r[p]=[t,a,s]},n.d=(r,e)=>{for(var t in e)n.o(e,t)&&!n.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},n.f={},n.e=r=>Promise.all(Object.keys(n.f).reduce(((e,t)=>(n.f[t](r,e),e)),[])),n.u=r=>r+".main.js",n.miniCssF=r=>{},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),n.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),(()=>{var r;n.g.importScripts&&(r=n.g.location+"");var e=n.g.document;if(!r&&e&&(e.currentScript&&(r=e.currentScript.src),!r)){var t=e.getElementsByTagName("script");if(t.length)for(var a=t.length-1;a>-1&&!r;)r=t[a--].src}if(!r)throw new Error("Automatic publicPath is not supported in this browser");r=r.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=r})(),(()=>{var r={136:1};n.f.i=(e,t)=>{r[e]||importScripts(n.p+n.u(e))};var e=self.webpackChunksoulflame_webgpu=self.webpackChunksoulflame_webgpu||[],t=e.push.bind(e);e.push=e=>{var[a,s,o]=e;for(var i in s)n.o(s,i)&&(n.m[i]=s[i]);for(o&&o(n);a.length;)r[a.pop()]=1;t(e)}})(),e=n.x,n.x=()=>n.e(416).then(e),n.x()})();