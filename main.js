(()=>{"use strict";var t={698:(t,e,n)=>{n.r(e)},687:(t,e,n)=>{n.r(e),n.d(e,{MotionValue:()=>o,ScrollOffset:()=>Gt,animate:()=>Te,animateStyle:()=>G,createAnimate:()=>lt,createMotionState:()=>we,createStyleString:()=>Oe,createStyles:()=>be,getAnimationData:()=>a,getStyleName:()=>L,glide:()=>Pt,inView:()=>jt,mountedStates:()=>ye,resize:()=>Lt,scroll:()=>oe,spring:()=>It,stagger:()=>ct,style:()=>U,timeline:()=>xt,withControls:()=>Z});var r=function(){};class o{setAnimation(t){this.animation=t,null==t||t.finished.then((()=>this.clearAnimation())).catch((()=>{}))}clearAnimation(){this.animation=this.generator=void 0}}const i=new WeakMap;function a(t){return i.has(t)||i.set(t,{transforms:[],values:new Map}),i.get(t)}const s=()=>{},c=t=>t;function u(t,e){-1===t.indexOf(e)&&t.push(e)}function l(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const f=["","X","Y","Z"],d={x:"translateX",y:"translateY",z:"translateZ"},h={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},m={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:h,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:c},skew:h},v=new Map,p=t=>`--motion-${t}`,g=["x","y","z"];["translate","scale","rotate","skew"].forEach((t=>{f.forEach((e=>{g.push(t+e),v.set(p(t+e),m[t])}))}));const y=(t,e)=>g.indexOf(t)-g.indexOf(e),w=new Set(g),b=t=>w.has(t),M=(t,e)=>{d[e]&&(e=d[e]);const{transforms:n}=a(t);u(n,e),t.style.transform=x(n)},x=t=>t.sort(y).reduce(O,"").trim(),O=(t,e)=>`${t} ${e}(var(${p(e)}))`,S=t=>t.startsWith("--"),E=new Set,T={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},B=t=>"object"==typeof t&&Boolean(t.createAnimation),_=t=>"function"==typeof t,D=t=>"number"==typeof t,A=t=>Array.isArray(t)&&!D(t[0]),I={ms:t=>1e3*t,s:t=>t/1e3},P=(t,e,n)=>e-t==0?1:(n-t)/(e-t),z=t=>Array.isArray(t)&&D(t[0]),j=(t,e)=>document.createElement("div").animate(t,e),R={cssRegisterProperty:()=>"undefined"!=typeof CSS&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{j({opacity:[1]})}catch(t){return!1}return!0},finished:()=>Boolean(j({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{j({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0}},q={},C={};for(const t in R)C[t]=()=>(void 0===q[t]&&(q[t]=R[t]()),q[t]);const V=(t,e)=>_(t)?C.linearEasing()?`linear(${((t,e)=>{let n="";const r=Math.round(e/.015);for(let e=0;e<r;e++)n+=t(P(0,r-1,e))+", ";return n.substring(0,n.length-2)})(t,e)})`:T.easing:z(t)?k(t):t,k=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,F=t=>Array.isArray(t)?t:[t];function L(t){return d[t]&&(t=d[t]),b(t)?p(t):t}const U={get:(t,e)=>{e=L(e);let n=S(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!n&&0!==n){const t=v.get(e);t&&(n=t.initialValue)}return n},set:(t,e,n)=>{e=L(e),S(e)?t.style.setProperty(e,n):t.style[e]=n}};function N(t,e=!0){if(t&&"finished"!==t.playState)try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch(t){}}const W=t=>"string"==typeof t;function $(t,e){var n;let r=(null==e?void 0:e.toDefaultUnit)||c;const o=t[t.length-1];if(W(o)){const t=(null===(n=o.match(/(-?[\d.]+)([a-z%]*)/))||void 0===n?void 0:n[2])||"";t&&(r=e=>e+t)}return r}function G(t,e,n,r={},i){const c=window.__MOTION_DEV_TOOLS_RECORD,u=!1!==r.record&&c;let l,{duration:f=T.duration,delay:d=T.delay,endDelay:h=T.endDelay,repeat:m=T.repeat,easing:p=T.easing,persist:g=!1,direction:y,offset:w,allowWebkitAcceleration:x=!1}=r;const O=a(t),P=b(e);let z=C.waapi();P&&M(t,e);const j=L(e),R=function(t,e){return t.has(e)||t.set(e,new o),t.get(e)}(O.values,j),q=v.get(j);return N(R.animation,!(B(p)&&R.generator)&&!1!==r.record),()=>{const o=()=>{var e,n;return null!==(n=null!==(e=U.get(t,j))&&void 0!==e?e:null==q?void 0:q.initialValue)&&void 0!==n?n:0};let a=function(t,e){for(let n=0;n<t.length;n++)null===t[n]&&(t[n]=n?t[n-1]:e());return t}(F(n),o);const b=$(a,q);if(B(p)){const t=p.createAnimation(a,"opacity"!==e,o,j,R);p=t.easing,a=t.keyframes||a,f=t.duration||f}if(S(j)&&(C.cssRegisterProperty()?function(t){if(!E.has(t)){E.add(t);try{const{syntax:e,initialValue:n}=v.has(t)?v.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:n})}catch(t){}}}(j):z=!1),P&&!C.linearEasing()&&(_(p)||A(p)&&p.some(_))&&(z=!1),z){q&&(a=a.map((t=>D(t)?q.toDefaultUnit(t):t))),1!==a.length||C.partialKeyframes()&&!u||a.unshift(o());const e={delay:I.ms(d),duration:I.ms(f),endDelay:I.ms(h),easing:A(p)?void 0:V(p,f),direction:y,iterations:m+1,fill:"both"};l=t.animate({[j]:a,offset:w,easing:A(p)?p.map((t=>V(t,f))):void 0},e),l.finished||(l.finished=new Promise(((t,e)=>{l.onfinish=t,l.oncancel=e})));const n=a[a.length-1];l.finished.then((()=>{g||(U.set(t,j,n),l.cancel())})).catch(s),x||(l.playbackRate=1.000001)}else if(i&&P)a=a.map((t=>"string"==typeof t?parseFloat(t):t)),1===a.length&&a.unshift(parseFloat(o())),l=new i((e=>{U.set(t,j,b?b(e):e)}),a,Object.assign(Object.assign({},r),{duration:f,easing:p}));else{const e=a[a.length-1];U.set(t,j,q&&D(e)?q.toDefaultUnit(e):e)}return u&&c(t,e,a,{duration:f,delay:d,easing:p,repeat:m,offset:w},"motion-one"),R.setAnimation(l),l}}const H=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function X(t,e){var n;return"string"==typeof t?e?(null!==(n=e[t])&&void 0!==n||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const Y=t=>t(),Z=(t,e,n=T.duration)=>new Proxy({animations:t.map(Y).filter(Boolean),duration:n,options:e},K),K={get:(t,e)=>{const n=t.animations[0];switch(e){case"duration":return t.duration;case"currentTime":return I.s((null==n?void 0:n[e])||0);case"playbackRate":case"playState":return null==n?void 0:n[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(J)).catch(s)),t.finished;case"stop":return()=>{t.animations.forEach((t=>N(t)))};case"forEachNative":return e=>{t.animations.forEach((n=>e(n,t)))};default:return void 0===(null==n?void 0:n[e])?void 0:()=>t.animations.forEach((t=>t[e]()))}},set:(t,e,n)=>{switch(e){case"currentTime":n=I.ms(n);case"playbackRate":for(let r=0;r<t.animations.length;r++)t.animations[r][e]=n;return!0}return!1}},J=t=>t.finished,Q=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,tt=1e-7,et=12;function nt(t,e,n,r){if(t===e&&n===r)return c;return o=>0===o||1===o?o:Q(function(t,e,n,r,o){let i,a,s=0;do{a=e+(n-e)/2,i=Q(a,r,o)-t,i>0?n=a:e=a}while(Math.abs(i)>tt&&++s<et);return a}(o,0,1,t,n),e,r)}const rt=(t,e,n)=>Math.min(Math.max(n,t),e),ot=(t,e="end")=>n=>{const r=(n="end"===e?Math.min(n,.999):Math.max(n,.001))*t,o="end"===e?Math.floor(r):Math.ceil(r);return rt(0,1,o/t)},it={ease:nt(.25,.1,.25,1),"ease-in":nt(.42,0,1,1),"ease-in-out":nt(.42,0,.58,1),"ease-out":nt(0,0,.58,1)},at=/\((.*?)\)/;function st(t){if(_(t))return t;if(z(t))return nt(...t);if(it[t])return it[t];if(t.startsWith("steps")){const e=at.exec(t);if(e){const t=e[1].split(",");return ot(parseFloat(t[0]),t[1].trim())}}return c}function ct(t=.1,{start:e=0,from:n=0,easing:r}={}){return(o,i)=>{const a=D(n)?n:function(t,e){if("first"===t)return 0;{const n=e-1;return"last"===t?n:n/2}}(n,i),s=Math.abs(a-o);let c=t*s;if(r){const e=i*t;c=st(r)(c/e)*e}return e+c}}function ut(t,e,n){return _(t)?t(e,n):t}function lt(t){return function(e,n,o={}){const i=(e=X(e)).length;r(Boolean(i),"No valid element provided."),r(Boolean(n),"No keyframes defined.");const a=[];for(let r=0;r<i;r++){const s=e[r];for(const e in n){const c=H(o,e);c.delay=ut(c.delay,r,i);const u=G(s,e,n[e],c,t);a.push(u)}}return Z(a,o,o.duration)}}function ft(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}Object.create,Object.create;const dt=(t,e,n)=>-n*t+n*e+t;function ht(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const o=P(0,e,r);t.push(dt(n,1,o))}}function mt(t){const e=[0];return ht(e,t-1),e}function vt(t,e,n,r){var o;return D(e)?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):"<"===e?n:null!==(o=r.get(e))&&void 0!==o?o:t}const pt=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function gt(t,e){return A(t)?t[pt(0,t.length,e)]:t}function yt(t,e,n,r,o,i){!function(t,e,n){for(let r=0;r<t.length;r++){const o=t[r];o.at>e&&o.at<n&&(l(t,o),r--)}}(t,o,i);for(let a=0;a<e.length;a++)t.push({value:e[a],at:dt(o,i,r[a]),easing:gt(n,a)})}function wt(t,e){return t.at===e.at?null===t.value?1:-1:t.at-e.at}function bt(t,e=mt(t.length),n=c){const r=t.length,o=r-e.length;return o>0&&ht(e,o),o=>{let i=0;for(;i<r-2&&!(o<e[i+1]);i++);let a=rt(0,1,P(e[i],e[i+1],o));return a=gt(n,i)(a),dt(t[i],t[i+1],a)}}class Mt{constructor(t,e=[0,1],{easing:n,duration:r=T.duration,delay:o=T.delay,endDelay:i=T.endDelay,repeat:a=T.repeat,offset:s,direction:u="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=c,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise(((t,e)=>{this.resolve=t,this.reject=e})),n=n||T.easing,B(n)){const t=n.createAnimation(e);n=t.easing,e=t.keyframes||e,r=t.duration||r}this.repeat=a,this.easing=A(n)?c:st(n),this.updateDuration(r);const l=bt(e,s,A(n)?n.map(st):c);this.tick=e=>{var n;let r=0;r=void 0!==this.pauseTime?this.pauseTime:(e-this.startTime)*this.rate,this.t=r,r/=1e3,r=Math.max(r-o,0),"finished"===this.playState&&void 0===this.pauseTime&&(r=this.totalDuration);const a=r/this.duration;let s=Math.floor(a),c=a%1;!c&&a>=1&&(c=1),1===c&&s--;const f=s%2;("reverse"===u||"alternate"===u&&f||"alternate-reverse"===u&&!f)&&(c=1-c);const d=r>=this.totalDuration?1:Math.min(c,1),h=l(this.easing(d));t(h),void 0===this.pauseTime&&("finished"===this.playState||r>=this.totalDuration+i)?(this.playState="finished",null===(n=this.resolve)||void 0===n||n.call(this,h)):"idle"!==this.playState&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",void 0!==this.pauseTime?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",void 0!==this.frameRequestId&&cancelAnimationFrame(this.frameRequestId),null===(t=this.reject)||void 0===t||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){void 0!==this.pauseTime||0===this.rate?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}function xt(t,e={}){var n;const o=function(t,e={}){var{defaultOptions:n={}}=e,o=ft(e,["defaultOptions"]);const i=[],a=new Map,s={},c=new Map;let u=0,l=0,f=0;for(let e=0;e<t.length;e++){const o=t[e];if(W(o)){c.set(o,l);continue}if(!Array.isArray(o)){c.set(o.name,vt(l,o.at,u,c));continue}const[i,m,v={}]=o;void 0!==v.at&&(l=vt(l,v.at,u,c));let p=0;const g=X(i,s),y=g.length;for(let t=0;t<y;t++){const e=(d=g[t],!(h=a).has(d)&&h.set(d,{}),h.get(d));for(const o in m){const i=Ot(o,e);let a=F(m[o]);const s=H(v,o);let{duration:c=n.duration||T.duration,easing:u=n.easing||T.easing}=s;if(B(u)){r("opacity"===o||a.length>1,"spring must be provided 2 keyframes within timeline()");const t=u.createAnimation(a,"opacity"!==o,(()=>0),o);u=t.easing,a=t.keyframes||a,c=t.duration||c}const d=ut(v.delay,t,y)||0,h=l+d,g=h+c;let{offset:w=mt(a.length)}=s;1===w.length&&0===w[0]&&(w[1]=1);const b=w.length-a.length;b>0&&ht(w,b),1===a.length&&a.unshift(null),yt(i,a,u,w,h,g),p=Math.max(d+c,p),f=Math.max(g,f)}}u=l,l+=p}var d,h;return a.forEach(((t,e)=>{for(const r in t){const a=t[r];a.sort(wt);const s=[],c=[],u=[];for(let t=0;t<a.length;t++){const{at:e,value:n,easing:r}=a[t];s.push(n),c.push(P(0,f,e)),u.push(r||T.easing)}0!==c[0]&&(c.unshift(0),s.unshift(s[0]),u.unshift("linear")),1!==c[c.length-1]&&(c.push(1),s.push(null)),i.push([e,r,s,Object.assign(Object.assign(Object.assign({},n),{duration:f,easing:u,offset:c}),o)])}})),i}(t,e),i=o.map((t=>G(...t,Mt))).filter(Boolean);return Z(i,e,null===(n=o[0])||void 0===n?void 0:n[3].duration)}function Ot(t,e){return e[t]||(e[t]=[]),e[t]}function St(t,e){return e?t*(1e3/e):0}const Et=5;function Tt(t,e,n){const r=Math.max(e-Et,0);return St(n-t(r),e-r)}const Bt=({stiffness:t=100,damping:e=10,mass:n=1,from:r=0,to:o=1,velocity:i=0,restSpeed:a,restDistance:s}={})=>{i=i?I.s(i):0;const c={done:!1,hasReachedTarget:!1,current:r,target:o},u=o-r,l=Math.sqrt(t/n)/1e3,f=((t=100,e=10,n=1)=>e/(2*Math.sqrt(t*n)))(t,e,n),d=Math.abs(u)<5;let h;if(a||(a=d?.01:2),s||(s=d?.005:.5),f<1){const t=l*Math.sqrt(1-f*f);h=e=>o-Math.exp(-f*l*e)*((f*l*u-i)/t*Math.sin(t*e)+u*Math.cos(t*e))}else h=t=>o-Math.exp(-l*t)*(u+(l*u-i)*t);return t=>{c.current=h(t);const e=0===t?i:Tt(h,t,c.current),n=Math.abs(e)<=a,u=Math.abs(o-c.current)<=s;var l,f,d;return c.done=n&&u,c.hasReachedTarget=(l=r,f=o,d=c.current,l<f&&d>=f||l>f&&d<=f),c}};function _t(t){return D(t)&&!isNaN(t)}function Dt(t){return W(t)?parseFloat(t):t}function At(t){const e=new WeakMap;return(n={})=>{const r=new Map,o=(e=0,o=100,i=0,a=!1)=>{const s=`${e}-${o}-${i}-${a}`;return r.has(s)||r.set(s,t(Object.assign({from:e,to:o,velocity:i},n))),r.get(s)},i=(t,n)=>(e.has(t)||e.set(t,function(t,e=c){let n,r=10,o=t(0);const i=[e(o.current)];for(;!o.done&&r<1e4;)o=t(r),i.push(e(o.done?o.target:o.current)),void 0===n&&o.hasReachedTarget&&(n=r),r+=10;const a=r-10;return 1===i.length&&i.push(o.current),{keyframes:i,duration:a/1e3,overshootDuration:(null!=n?n:a)/1e3}}(t,n)),e.get(t));return{createAnimation:(t,e=!0,n,r,a)=>{let s,u,l,f=0,d=c;const h=t.length;if(e)if(d=$(t,r?v.get(L(r)):void 0),l=Dt(t[h-1]),h>1&&null!==t[0])u=Dt(t[0]);else{const t=null==a?void 0:a.generator;if(t){const{animation:e,generatorStartTime:n}=a,r=(null==e?void 0:e.startTime)||n||0,o=(null==e?void 0:e.currentTime)||performance.now()-r,i=t(o).current;u=i,f=Tt((e=>t(e).current),o,i)}else n&&(u=Dt(n()))}if(_t(u)&&_t(l)){const t=o(u,l,f,null==r?void 0:r.includes("scale"));s=Object.assign(Object.assign({},i(t,d)),{easing:"linear"}),a&&(a.generator=t,a.generatorStartTime=performance.now())}return s||(s={easing:"ease",duration:i(o(0,100)).overshootDuration}),s}}}}const It=At(Bt),Pt=At((({from:t=0,velocity:e=0,power:n=.8,decay:r=.325,bounceDamping:o,bounceStiffness:i,changeTarget:a,min:s,max:c,restDistance:u=.5,restSpeed:l})=>{r=I.ms(r);const f={hasReachedTarget:!1,done:!1,current:t,target:t},d=t=>void 0===s?c:void 0===c||Math.abs(s-t)<Math.abs(c-t)?s:c;let h=n*e;const m=t+h,v=void 0===a?m:a(m);f.target=v,v!==m&&(h=v-t);const p=t=>-h*Math.exp(-t/r),g=t=>v+p(t),y=t=>{const e=p(t),n=g(t);f.done=Math.abs(e)<=u,f.current=f.done?v:n};let w,b;const M=t=>{var e;e=f.current,(void 0!==s&&e<s||void 0!==c&&e>c)&&(w=t,b=Bt({from:f.current,to:d(f.current),velocity:Tt(g,t,f.current),damping:o,stiffness:i,restDistance:u,restSpeed:l}))};return M(0),t=>{let e=!1;return b||void 0!==w||(e=!0,y(t),M(t)),void 0!==w&&t>w?(f.hasReachedTarget=!0,b(t-w)):(f.hasReachedTarget=!1,!e&&y(t),f)}})),zt={any:0,all:1};function jt(t,e,{root:n,margin:r,amount:o="any"}={}){if("undefined"==typeof IntersectionObserver)return()=>{};const i=X(t),a=new WeakMap,s=new IntersectionObserver((t=>{t.forEach((t=>{const n=a.get(t.target);if(t.isIntersecting!==Boolean(n))if(t.isIntersecting){const n=e(t);_(n)?a.set(t.target,n):s.unobserve(t.target)}else n&&(n(t),a.delete(t.target))}))}),{root:n,rootMargin:r,threshold:"number"==typeof o?o:zt[o]});return i.forEach((t=>s.observe(t))),()=>s.disconnect()}const Rt=new WeakMap;let qt;function Ct({target:t,contentRect:e,borderBoxSize:n}){var r;null===(r=Rt.get(t))||void 0===r||r.forEach((r=>{r({target:t,contentSize:e,get size(){return function(t,e){if(e){const{inlineSize:t,blockSize:n}=e[0];return{width:t,height:n}}return t instanceof SVGElement&&"getBBox"in t?t.getBBox():{width:t.offsetWidth,height:t.offsetHeight}}(t,n)}})}))}function Vt(t){t.forEach(Ct)}const kt=new Set;let Ft;function Lt(t,e){return _(t)?(n=t,kt.add(n),Ft||(Ft=()=>{const t={width:window.innerWidth,height:window.innerHeight},e={target:window,size:t,contentSize:t};kt.forEach((t=>t(e)))},window.addEventListener("resize",Ft)),()=>{kt.delete(n),!kt.size&&Ft&&(Ft=void 0)}):function(t,e){qt||"undefined"!=typeof ResizeObserver&&(qt=new ResizeObserver(Vt));const n=X(t);return n.forEach((t=>{let n=Rt.get(t);n||(n=new Set,Rt.set(t,n)),n.add(e),null==qt||qt.observe(t)})),()=>{n.forEach((t=>{const n=Rt.get(t);null==n||n.delete(e),(null==n?void 0:n.size)||null==qt||qt.unobserve(t)}))}}(t,e);var n}const Ut=50,Nt=()=>({time:0,x:{current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0},y:{current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}}),Wt={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function $t(t,e,n,r){const o=n[e],{length:i,position:a}=Wt[e],s=o.current,c=n.time;o.current=t["scroll"+a],o.scrollLength=t["scroll"+i]-t["client"+i],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=P(0,o.scrollLength,o.current);const u=r-c;o.velocity=u>Ut?0:St(o.current-s,u)}const Gt={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},Ht={start:0,center:.5,end:1};function Xt(t,e,n=0){let r=0;if(void 0!==Ht[t]&&(t=Ht[t]),W(t)){const e=parseFloat(t);t.endsWith("px")?r=e:t.endsWith("%")?t=e/100:t.endsWith("vw")?r=e/100*document.documentElement.clientWidth:t.endsWith("vh")?r=e/100*document.documentElement.clientHeight:t=e}return D(t)&&(r=e*t),n+r}const Yt=[0,0];function Zt(t,e,n,r){let o=Array.isArray(t)?t:Yt,i=0,a=0;return D(t)?o=[t,t]:W(t)&&(o=(t=t.trim()).includes(" ")?t.split(" "):[t,Ht[t]?t:"0"]),i=Xt(o[0],n,r),a=Xt(o[1],e),i-a}const Kt={x:0,y:0};function Jt(t,e,n,r={}){const o=r.axis||"y";return{measure:()=>function(t,e=t,n){if(n.x.targetOffset=0,n.y.targetOffset=0,e!==t){let r=e;for(;r&&r!=t;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=e===t?e.scrollWidth:e.clientWidth,n.y.targetLength=e===t?e.scrollHeight:e.clientHeight,n.x.containerLength=t.clientWidth,n.y.containerLength=t.clientHeight}(t,r.target,n),update:e=>{!function(t,e,n){$t(t,"x",e,n),$t(t,"y",e,n),e.time=n}(t,n,e),(r.offset||r.target)&&function(t,e,n){let{offset:r=Gt.All}=n;const{target:o=t,axis:i="y"}=n,a="y"===i?"height":"width",s=o!==t?function(t,e){let n={x:0,y:0},r=t;for(;r&&r!==e;)if(r instanceof HTMLElement)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if(r instanceof SVGGraphicsElement&&"getBBox"in r){const{top:t,left:e}=r.getBBox();for(n.x+=e,n.y+=t;r&&"svg"!==r.tagName;)r=r.parentNode}return n}(o,t):Kt,c=o===t?{width:t.scrollWidth,height:t.scrollHeight}:{width:o.clientWidth,height:o.clientHeight},u={width:t.clientWidth,height:t.clientHeight};e[i].offset.length=0;let l=!e[i].interpolate;const f=r.length;for(let t=0;t<f;t++){const n=Zt(r[t],u[a],c[a],s[i]);l||n===e[i].interpolatorOffsets[t]||(l=!0),e[i].offset[t]=n}l&&(e[i].interpolate=bt(mt(f),e[i].offset),e[i].interpolatorOffsets=[...e[i].offset]),e[i].progress=e[i].interpolate(e[i].current)}(t,n,r)},notify:_(e)?()=>e(n):Qt(e,n[o])}}function Qt(t,e){return t.pause(),t.forEachNative(((t,{easing:e})=>{var n,r;if(t.updateDuration)e||(t.easing=c),t.updateDuration(1);else{const o={duration:1e3};e||(o.easing="linear"),null===(r=null===(n=t.effect)||void 0===n?void 0:n.updateTiming)||void 0===r||r.call(n,o)}})),()=>{t.currentTime=e.progress}}const te=new WeakMap,ee=new WeakMap,ne=new WeakMap,re=t=>t===document.documentElement?window:t;function oe(t,e={}){var{container:n=document.documentElement}=e,r=ft(e,["container"]);let o=ne.get(n);o||(o=new Set,ne.set(n,o));const i=Nt(),a=Jt(n,t,i,r);if(o.add(a),!te.has(n)){const t=()=>{const t=performance.now();for(const t of o)t.measure();for(const e of o)e.update(t);for(const t of o)t.notify()};te.set(n,t);const e=re(n);window.addEventListener("resize",t,{passive:!0}),n!==document.documentElement&&ee.set(n,Lt(n,t)),e.addEventListener("scroll",t,{passive:!0})}const s=te.get(n),c=requestAnimationFrame(s);return()=>{var e;"function"!=typeof t&&t.stop(),cancelAnimationFrame(c);const r=ne.get(n);if(!r)return;if(r.delete(a),r.size)return;const o=te.get(n);te.delete(n),o&&(re(n).removeEventListener("scroll",o),null===(e=ee.get(n))||void 0===e||e(),window.removeEventListener("resize",o))}}function ie(t,e){return function(t){return"object"==typeof t}(t)?t:t&&e?e[t]:void 0}let ae;function se(){if(!ae)return;const t=ae.sort(ue).map(le);t.forEach(fe),t.forEach(fe),ae=void 0}function ce(t){ae?u(ae,t):(ae=[t],requestAnimationFrame(se))}const ue=(t,e)=>t.getDepth()-e.getDepth(),le=t=>t.animateUpdates(),fe=t=>t.next(),de=(t,e)=>new CustomEvent(t,{detail:{target:e}});function he(t,e,n){t.dispatchEvent(new CustomEvent(e,{detail:{originalEvent:n}}))}function me(t,e,n){t.dispatchEvent(new CustomEvent(e,{detail:{originalEntry:n}}))}const ve=(t,e,n)=>r=>{r.pointerType&&"mouse"!==r.pointerType||(n(),he(t,e,r))},pe={inView:{isActive:t=>Boolean(t.inView),subscribe:(t,{enable:e,disable:n},{inViewOptions:r={}})=>{const{once:o}=r,i=ft(r,["once"]);return jt(t,(r=>{if(e(),me(t,"viewenter",r),!o)return e=>{n(),me(t,"viewleave",e)}}),i)}},hover:{isActive:t=>Boolean(t.hover),subscribe:(t,{enable:e,disable:n})=>{const r=ve(t,"hoverstart",e),o=ve(t,"hoverend",n);return t.addEventListener("pointerenter",r),t.addEventListener("pointerleave",o),()=>{t.removeEventListener("pointerenter",r),t.removeEventListener("pointerleave",o)}}},press:{isActive:t=>Boolean(t.press),subscribe:(t,{enable:e,disable:n})=>{const r=e=>{n(),he(t,"pressend",e),window.removeEventListener("pointerup",r)},o=n=>{e(),he(t,"pressstart",n),window.addEventListener("pointerup",r)};return t.addEventListener("pointerdown",o),()=>{t.removeEventListener("pointerdown",o),window.removeEventListener("pointerup",r)}}}},ge=["initial","animate",...Object.keys(pe),"exit"],ye=new WeakMap;function we(t={},e){let n,o=e?e.getDepth()+1:0;const i={initial:!0,animate:!0},a={},c={};for(const n of ge)c[n]="string"==typeof t[n]?t[n]:null==e?void 0:e.getContext()[n];const u=!1===t.initial?"animate":"initial";let f=ft(ie(t[u]||c[u],t.variants)||{},["transition"]);const d=Object.assign({},f),h=(t,e)=>()=>{i[t]=e,ce(v)},m=()=>{for(const e in pe){const r=pe[e].isActive(t),o=a[e];r&&!o?a[e]=pe[e].subscribe(n,{enable:h(e,!0),disable:h(e,!1)},t):!r&&o&&(o(),delete a[e])}},v={update:e=>{n&&(t=e,m(),ce(v))},setActive:(t,e)=>{n&&(i[t]=e,ce(v))},animateUpdates:function*(){var e,r;const o=f;f={};const a={};for(const n of ge){if(!i[n])continue;const o=ie(t[n]);if(o)for(const n in o)"transition"!==n&&(f[n]=o[n],a[n]=H(null!==(r=null!==(e=o.transition)&&void 0!==e?e:t.transition)&&void 0!==r?r:{},n))}const c=new Set([...Object.keys(f),...Object.keys(o)]),u=[];c.forEach((t=>{var e,r,i;void 0===f[t]&&(f[t]=d[t]),typeof(r=o[t])==typeof(i=f[t])&&(Array.isArray(r)&&Array.isArray(i)?function(t,e){const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}(r,i):r===i)||(null!==(e=d[t])&&void 0!==e||(d[t]=U.get(n,t)),u.push(G(n,t,f[t],a[t],Mt)))})),yield;const l=u.map((t=>t())).filter(Boolean);if(!l.length)return;const h=f;n.dispatchEvent(de("motionstart",h)),Promise.all(l.map((t=>t.finished))).then((()=>{n.dispatchEvent(de("motioncomplete",h))})).catch(s)},getDepth:()=>o,getTarget:()=>f,getOptions:()=>t,getContext:()=>c,mount:t=>(r(Boolean(t),"Animation state must be mounted with valid Element"),n=t,ye.set(n,v),m(),()=>{ye.delete(n),function(t){ae&&l(ae,t)}(v);for(const t in a)a[t]()}),isMounted:()=>Boolean(n)};return v}function be(t){const e={},n=[];for(let r in t){const o=t[r];b(r)&&(d[r]&&(r=d[r]),n.push(r),r=p(r));let i=Array.isArray(o)?o[0]:o;const a=v.get(r);a&&(i=D(o)?a.toDefaultUnit(o):o),e[r]=i}return n.length&&(e.transform=x(n)),e}const Me=t=>`-${t.toLowerCase()}`,xe=t=>t.replace(/[A-Z]/g,Me);function Oe(t={}){const e=be(t);let n="";for(const t in e)n+=t.startsWith("--")?t:xe(t),n+=`: ${e[t]}; `;return n}const Se=lt(Mt);function Ee(t,e={}){return Z([()=>{const n=new Mt(t,[0,1],e);return n.finished.catch((()=>{})),n}],e,e.duration)}function Te(t,e,n){return(_(t)?Ee:Se)(t,e,n)}},752:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.camera=e.deltaTime=e.elapsedTime=e.translateX=e.scale=e.resolution=e.canvas=e.gpuContext=e.device=void 0;const o=r(n(144)),i=n(768),a=n(608),s=n(830),c=n(562);n(698);const u=n(687),l=n(416),f=n(100);e.resolution=l.vec2.zero();let d=1;e.scale=1,e.translateX=0;const h=performance.now();e.elapsedTime=h,e.deltaTime=0;const m=l.vec3.create(120,120,120),v=l.vec3.normalize(l.vec3.create(-1,-1,-1));e.camera=new s.Camera({fieldOfView:82.5,position:l.vec3.create(120,0,120),direction:l.vec3.normalize(l.vec3.create(-1,0,-1))});const p=()=>{const t=m,n=e.camera.position,r=v,o=e.camera.direction,i=e.camera.fieldOfView,a=e.scale,s=e.translateX;(0,u.animate)((c=>{e.camera.position=l.vec3.add(n,l.vec3.mulScalar(l.vec3.subtract(t,n),c)),e.camera.direction=l.vec3.add(o,l.vec3.mulScalar(l.vec3.subtract(r,o),c)),e.camera.fieldOfView=i+(82.5-i)*c,e.scale=a+(1-a)*c,e.translateX=s+(0-s)*c}),{easing:(0,u.spring)({restDistance:1e-4,damping:40,stiffness:700,mass:2})})};p(),window.addEventListener("resetcamera",p);const g=new c.DebugUI;let y;window.addEventListener("changefov",(t=>{e.camera.fieldOfView=parseFloat(t.detail)})),window.addEventListener("changetranslate",(t=>{e.translateX=parseFloat(t.detail)})),window.addEventListener("changescale",(t=>{e.scale=parseFloat(t.detail)}));void 0!==navigator.gpu?navigator.gpu.requestAdapter().then((t=>{t.requestDevice().then((t=>{e.device=t,console.log(e.device.limits);const n=(0,a.createComputePass)();((t,n)=>{let r,a,c,u,m,v;e.canvas=document.getElementById("webgpu-canvas"),e.gpuContext=e.canvas.getContext("webgpu");const p=navigator.gpu.getPreferredCanvasFormat();e.gpuContext.configure({device:t,format:p,usage:GPUTextureUsage.RENDER_ATTACHMENT});const w=t.createShaderModule({code:o.default}),b=t.createRenderPipeline({layout:"auto",vertex:{module:w,entryPoint:"vertex_main"},fragment:{module:w,entryPoint:"fragment_main",targets:[{format:p}]}}),M=()=>{cancelAnimationFrame(c),x()},x=()=>{const{clientWidth:t,clientHeight:r}=e.canvas.parentElement;let o=Math.min(window.devicePixelRatio,1.5);e.resolution=l.vec2.create(t*o,r*o),v=l.vec2.mulScalar(e.resolution,1/d),e.canvas.width=e.resolution[0],e.canvas.height=e.resolution[1],e.canvas.style.transform=`scale(${1/o})`,n.forEach((t=>{t.start()})),c=requestAnimationFrame(O)},O=async()=>{const o=performance.now()-h;e.deltaTime=o-e.elapsedTime,e.elapsedTime=o,(0,s.moveCamera)(),e.camera.update(),g.log(`Position: ${e.camera.position[0].toFixed(0)}, ${e.camera.position[1].toFixed(0)}, ${e.camera.position[2].toFixed(0)}\n    Resolution: ${v[0].toFixed(0)}x${v[1].toFixed(0)}\n    FPS: ${(1e3/e.deltaTime).toFixed(1)}\n    `);const d=t.createCommandEncoder();u?(0,i.writeToUniformBuffer)(u,[e.elapsedTime]):u=(0,i.createUniformBuffer)([e.elapsedTime]),m?(0,i.writeToUniformBuffer)(m,[v[0],v[1]]):m=(0,i.createUniformBuffer)([v[0],v[1]]);const p=(a&&a.destroy(),a=t.createTexture({size:[v[0],v[1],1],format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.STORAGE_BINDING}),a.createView());n.forEach((t=>{let n=l.mat4.identity();l.mat4.translate(n,[e.translateX,0,0],n),l.mat4.translate(n,[32,32,32],n),l.mat4.rotateY(n,1e-4*performance.now(),n),l.mat4.scale(n,[e.scale,e.scale,e.scale],n),l.mat4.translate(n,[-32,-32,-32],n),l.mat4.invert(n,n);let r=new f.VoxelObject(n,[64,64,64]),o=new f.VoxelObject(l.mat4.identity(),[32,32,32]);document.getElementById("matrix").innerHTML=n.reduce(((t,e)=>`${t}<span>${e.toFixed(1)}</span>`),""),t.render({commandEncoder:d,resolutionBuffer:m,outputTextureView:p,voxelObjects:[r,o]})})),(({commandEncoder:n,outputTextureView:o})=>{const i=n.beginRenderPass({colorAttachments:[{view:e.gpuContext.getCurrentTexture().createView(),loadOp:"clear",clearValue:[.3,.3,.3,1],storeOp:"store"}]});r=t.createBindGroup({layout:b.getBindGroupLayout(0),entries:[{binding:0,resource:t.createSampler({magFilter:"linear",minFilter:"linear"})},{binding:1,resource:o}]}),i.setPipeline(b),i.setBindGroup(0,r),i.draw(6),i.end()})({commandEncoder:d,outputTextureView:p}),t.queue.submit([d.finish()]),c=requestAnimationFrame(O)},S=new ResizeObserver(M);y=t=>{d=t.detail,M()},window.addEventListener("changedownscale",y),S.observe(e.canvas.parentElement)})(e.device,[n])}))})):console.error("WebGPU not supported")},768:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createFloatUniformBuffer=e.writeToFloatUniformBuffer=e.createUniformBuffer=e.writeToUniformBuffer=void 0;const r=n(752);e.writeToUniformBuffer=(t,e)=>{const n=new Uint32Array(e);r.device.queue.writeBuffer(t,0,n.buffer,0,e.length*Uint32Array.BYTES_PER_ELEMENT)},e.createUniformBuffer=(t,n)=>{const o=new Uint32Array(t),i=r.device.createBuffer({size:o.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,label:n});return(0,e.writeToUniformBuffer)(i,t),i},e.writeToFloatUniformBuffer=(t,e)=>{const n=new Float32Array(e);r.device.queue.writeBuffer(t,0,n.buffer,0,e.length*Float32Array.BYTES_PER_ELEMENT)},e.createFloatUniformBuffer=(t,n)=>{const o=new Float32Array(t),i=r.device.createBuffer({size:o.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,label:n});return(0,e.writeToFloatUniformBuffer)(i,t),i}},830:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.moveCamera=e.Camera=void 0;const r=n(752),o=n(718),i=n(224),a=n(416),s=new o.KeyboardControls;class c extends i.MoveableObject{fieldOfView;direction;near=.1;far=1e6;constructor(t){super({position:t.position}),this.fieldOfView=t.fieldOfView,this.direction=t.direction}get right(){return a.vec3.normalize(a.vec3.cross(a.vec3.create(0,1,0),this.direction))}get left(){return a.vec3.negate(this.right)}get up(){return a.vec3.normalize(a.vec3.cross(this.direction,this.right))}get down(){return a.vec3.negate(this.up)}rotateX(t){}rotateY(t){}}e.Camera=c,e.moveCamera=()=>{if(!document.hasFocus())return;let t=a.vec3.zero();s.pressed.a&&(t=a.vec3.add(t,r.camera.left)),s.pressed.d&&(t=a.vec3.add(t,r.camera.right)),s.pressed.w&&(t=a.vec3.add(t,r.camera.direction)),s.pressed.s&&(t=a.vec3.subtract(t,r.camera.direction)),s.pressed[" "]&&(t=a.vec3.add(t,r.camera.up)),s.pressed.Control&&(t=a.vec3.add(t,r.camera.down)),t=a.vec3.normalize(t),r.camera.velocity=a.vec3.add(r.camera.velocity,a.vec3.mulScalar(t,.01))}},608:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.createComputePass=void 0;const o=r(n(961)),i=r(n(693)),a=n(768),s=n(752),c=n(416);e.createComputePass=()=>{let t;return{start:()=>{t=s.device.createComputePipeline({layout:"auto",compute:{module:s.device.createShaderModule({code:`\n          ${i.default}${o.default}`}),entryPoint:"main"}})},render:({commandEncoder:e,resolutionBuffer:n,outputTextureView:r,voxelObjects:o})=>{const i=(t=>{const e=s.resolution[0]/s.resolution[1],n=t.fieldOfView/2,r=Math.tan(n),o=c.vec3.normalize(c.vec3.cross(c.vec3.create(0,1,0),t.direction)),i=c.vec3.normalize(c.vec3.cross(t.direction,o)),a=c.vec3.mulScalar(i,r);return[c.vec3.add(c.vec3.add(t.direction,a),c.vec3.mulScalar(o,-e*r)),c.vec3.add(c.vec3.add(t.direction,a),c.vec3.mulScalar(o,e*r)),c.vec3.add(c.vec3.subtract(t.direction,a),c.vec3.mulScalar(o,-e*r)),c.vec3.add(c.vec3.subtract(t.direction,a),c.vec3.mulScalar(o,e*r))]})(s.camera).flatMap((t=>[...t,0])),u=(0,a.createFloatUniformBuffer)(i,"frustum corner directions"),l=(0,a.createFloatUniformBuffer)(s.camera.position,"camera position"),f=(0,a.createFloatUniformBuffer)(o.flatMap((t=>t.toArray())),"voxel object"),d=e.beginComputePass();d.setPipeline(t);const h=s.device.createBindGroup({layout:t.getBindGroupLayout(0),entries:[{binding:0,resource:r},{binding:2,resource:{buffer:n}},{binding:3,resource:{buffer:u}},{binding:4,resource:{buffer:l}},{binding:5,resource:{buffer:f}}]});d.setBindGroup(0,h),d.dispatchWorkgroups(Math.ceil(s.resolution[0]/8),Math.ceil(s.resolution[1]/8)),d.end()}}}},718:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardControls=void 0,e.KeyboardControls=class{pressed={w:!1,a:!1,s:!1,d:!1," ":!1,Control:!1};constructor(){window.addEventListener("keydown",(t=>{const e=t.key.toLowerCase();this.pressed[e]=!0})),window.addEventListener("keyup",(t=>{const e=t.key.toLowerCase();this.pressed[e]=!1}))}}},224:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MoveableObject=void 0;const r=n(752),o=n(416);e.MoveableObject=class{position;targetPosition;velocity;constructor(t){this.position=t.position,this.targetPosition=this.position,this.velocity=o.vec3.zero()}update(){r.camera.velocity=o.vec3.mulScalar(r.camera.velocity,1-.015*r.deltaTime),this.position=o.vec3.add(this.position,o.vec3.mulScalar(this.velocity,r.deltaTime))}}},562:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DebugUI=void 0;const r=n(752);e.DebugUI=class{logElement;constructor(){document.getElementById("reset").addEventListener("click",(t=>{window.dispatchEvent(new CustomEvent("resetcamera")),document.getElementById("captures").innerHTML=""})),document.getElementById("capture").addEventListener("click",(t=>{const e=new Image;e.id=performance.now().toString(),e.src=r.canvas.toDataURL(),document.getElementById("captures").appendChild(e).addEventListener("click",(t=>{t.target,console.log(t.target)}))})),["downscale","fov","scale","translate"].forEach((t=>{document.getElementById(t).addEventListener("input",(e=>{const n=e.target;window.dispatchEvent(new CustomEvent(`change${t}`,{detail:n.value}))}))})),this.logElement=document.getElementById("log")}log(t){this.logElement.innerText=t}}},100:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VoxelObject=void 0,e.VoxelObject=class{transform;size;constructor(t,e){this.transform=t,this.size=e}toArray(){return[...this.transform,...this.size,0]}}},144:t=>{t.exports="@group(0) @binding(0) var mySampler : sampler;\n@group(0) @binding(1) var myTexture : texture_2d<f32>;\n\nstruct VertexOutput {\n  @builtin(position) Position : vec4<f32>,\n  @location(0) fragUV : vec2<f32>,\n}\n\n@vertex\nfn vertex_main(@builtin(vertex_index) VertexIndex : u32) -> VertexOutput {\n  const pos = array(\n    vec2( 1.0,  1.0),\n    vec2( 1.0, -1.0),\n    vec2(-1.0, -1.0),\n    vec2( 1.0,  1.0),\n    vec2(-1.0, -1.0),\n    vec2(-1.0,  1.0),\n  );\n\n  const uv = array(\n    vec2(1.0, 0.0),\n    vec2(1.0, 1.0),\n    vec2(0.0, 1.0),\n    vec2(1.0, 0.0),\n    vec2(0.0, 1.0),\n    vec2(0.0, 0.0),\n  );\n\n  var output : VertexOutput;\n  output.Position = vec4(pos[VertexIndex], 0.0, 1.0);\n  output.fragUV = uv[VertexIndex];\n  return output;\n}\n\n@fragment\nfn fragment_main(@location(0) fragUV : vec2<f32>) -> @location(0) vec4<f32> {\n//    return vec4(sin(f32(time) * 0.001), 0, 0, 1);\n    return textureSample(myTexture, mySampler, fragUV);\n}\n"},961:t=>{t.exports='struct FrustumCornerDirections {\n  topLeft : vec3<f32>,\n  topRight : vec3<f32>,\n  bottomLeft : vec3<f32>,\n  bottomRight : vec3<f32>\n}\n\nfn calculateRayDirection(uv: vec2<f32>, directions: FrustumCornerDirections) -> vec3<f32> {\n  let topInterpolated = mix(directions.topLeft, directions.topRight, uv.x);\n  let bottomInterpolated = mix(directions.bottomLeft, directions.bottomRight, uv.x);\n  let finalInterpolated = mix(bottomInterpolated, topInterpolated, uv.y);\n  return normalize(finalInterpolated);\n}\n\nfn plainIntersect(ro: vec3<f32>, rd: vec3<f32>, p: vec4<f32>) -> f32 {\n    return -(dot(ro, p.xyz) + p.w) / dot(rd, p.xyz);\n}\n\nstruct BoxIntersectionResult {\n    tNear: f32,\n    tFar: f32,\n    normal: vec3<f32>,\n}\n\nfn boxIntersection(\n    ro: vec3<f32>,\n    rd: vec3<f32>,\n    boxSize: vec3<f32>,\n) -> BoxIntersectionResult {\n    var result = BoxIntersectionResult();\n\n    let offsetRayOrigin = ro - boxSize;\n    let m: vec3<f32> = 1.0 / rd;\n    let n: vec3<f32> = m * offsetRayOrigin;\n    let k: vec3<f32> = abs(m) * boxSize;\n\n    let t1: vec3<f32> = -n - k;\n    let t2: vec3<f32> = -n + k;\n\n    let tN: f32 = max(max(t1.x, t1.y), t1.z);\n    let tF: f32 = min(min(t2.x, t2.y), t2.z);\n\n    if (tN > tF || tF < 0.0) {\n        result.tNear = -1.0;\n        result.tFar = -1.0;\n        result.normal = vec3(0.0);\n\n        return result;\n    }\n\n    // Check if the ray starts inside the volume\n    let insideVolume = tN < 0.0;\n\n    var normal = select(\n        step(vec3<f32>(tN), t1),\n        step(t2, vec3<f32>(tF)),\n        tN < 0.0,\n    );\n\n    normal *= -sign(rd);\n\n    // Check if the intersection is in the correct direction, only if inside the volume\n    if (insideVolume && dot(normal, rd) < 0.0) {\n        result.tNear = -1.0;\n        result.tFar = -1.0;\n        result.normal = vec3(0.0);\n        return result;\n    }\n\n\n\n    result.tNear = tN;\n    result.tFar = tF;\n    result.normal = normal;\n\n    return result;\n}\n\nstruct VoxelObject {\n  transform: mat4x4<f32>,\n  size : vec3<f32>,\n  padding : f32\n}\n\nconst VOXEL_OBJECT_COUNT = 2;\n\n@group(0) @binding(0) var outputTex : texture_storage_2d<rgba8unorm, write>;\n@group(0) @binding(2) var<uniform> resolution : vec2<u32>;\n@group(0) @binding(3) var<uniform> frustumCornerDirections : FrustumCornerDirections;\n@group(0) @binding(4) var<uniform> cameraPosition : vec3<f32>;\n@group(0) @binding(5) var<uniform> voxelObjects : array<VoxelObject, VOXEL_OBJECT_COUNT>; // TODO: dynamic amount of these using string interpolation\n\nconst EPSILON = 0.001;\nconst BORDER_WIDTH = 0.05;\nconst MAX_RAY_STEPS = 256;\n\nfn addVoxelBorderColour(baseColour: vec3<f32>, worldPos: vec3<f32>) -> vec3<f32> {\n  let positionInVoxel = fract(worldPos);\n  let voxelBorder = step(positionInVoxel, vec3(1 - BORDER_WIDTH)) - step(positionInVoxel, vec3(BORDER_WIDTH));\n  let isVoxelBorder = step(length(voxelBorder), 1.0);\n  return mix(baseColour,baseColour * 0.8,isVoxelBorder);\n}\n\nfn addBasicShading(baseColour: vec3<f32>, normal: vec3<f32>) -> vec3<f32> {\n  let lightDirection = normalize(vec3(0.5, 1.0, 0.5));\n  let cosTheta = max(dot(normal, lightDirection), 0.0);\n  let lambertianReflectance = cosTheta * baseColour;\n  return lambertianReflectance;\n}\n\nfn addBoundsBorderColour(baseColour: vec3<f32>, worldPos: vec3<f32>, bounds: vec3<f32>) -> vec3<f32> {\n  let positionInBounds = fract(worldPos / bounds);\n  let boundsBorderWidth = BORDER_WIDTH / bounds * 4.0;\n  let boundsBorder = step(positionInBounds, vec3(1 - boundsBorderWidth)) - step(positionInBounds, vec3(boundsBorderWidth));\n  let isBoundsBorder = step(length(boundsBorder), 1.0);\n  return mix(baseColour,vec3(1.0,0.0,1.0),isBoundsBorder);\n}\n\nfn sampleVoxel(position: vec3<f32>) -> bool {\n  let layer1 = (sin(position.x * 0.25) - sin(position.z * 0.25)) * 2;\n  let layer2 = (sin(position.x * 0.125) - sin(position.z * 0.125)) * 4;\n  let isSolidVoxel = layer1 + layer2 > (position.y - 32);\n  return isSolidVoxel;\n}\n\n@compute @workgroup_size(8, 8, 1)\nfn main(\n  @builtin(global_invocation_id) GlobalInvocationID : vec3<u32>\n) {\n  // background\n  var voxelSize = 1.0;\n  let pixel = vec2<f32>(f32(GlobalInvocationID.x), f32(resolution.y - GlobalInvocationID.y));\n  let uv = pixel / vec2<f32>(resolution);\n  var rayOrigin = cameraPosition;\n  var rayDirection = calculateRayDirection(uv,frustumCornerDirections);\n  var colour = sample_sky(rayDirection);\n  let plainIntersection = plainIntersect(rayOrigin, rayDirection, vec4<f32>(0.0, 1.0, 0.0, 0.0));\n  var worldPos = vec3(0.0);\n  if(plainIntersection > 0.0){\n    worldPos = plainIntersection * rayDirection + rayOrigin;\n    var borderColour = addVoxelBorderColour(colour, worldPos * 0.25);\n    colour = borderColour;\n  }\n\n  var tNear = 999999.0;\n  var occlusion = false;\n  var normal = vec3(0.0);\n  var closestIntersection = 9999999.0;\n\n  // voxel objects\n  for (var i = 0; i < VOXEL_OBJECT_COUNT; i++) {\n    var voxelObject = voxelObjects[i];\n    let objectRayOrigin = (voxelObject.transform * vec4<f32>(rayOrigin, 1.0)).xyz;\n    let objectRayDirection = (voxelObject.transform * vec4<f32>(rayDirection, 0.0)).xyz;\n    let intersect = boxIntersection(objectRayOrigin, objectRayDirection, voxelObject.size * 0.5);\n    tNear = intersect.tNear;\n    let boundingBoxSurfacePosition = objectRayOrigin + (tNear - EPSILON)  * objectRayDirection;\n    let isStartingInBounds = all(boundingBoxSurfacePosition > vec3(0.0)) && all(boundingBoxSurfacePosition < vec3(voxelObject.size / voxelSize));\n\n    let isBackwardsIntersection = tNear < 0.0 && !isStartingInBounds;\n    if(isBackwardsIntersection){\n      continue;\n    }\n\n    var pos = boundingBoxSurfacePosition;\n    var objectNormal = vec3(0.0);\n    var tIntersection = 0.0;\n    var stepsTaken = 0;\n    var voxelStep = sign(objectRayDirection);\n    var tDelta = vec3(voxelSize / abs(objectRayDirection));\n    var scaledStartingPoint = pos / voxelSize;\n    var scaledRayOrigin = vec3<f32>(objectRayOrigin) / voxelSize;\n    var currentIndex = floor(scaledStartingPoint);\n    var voxelOriginDifference = vec3<f32>(currentIndex) - scaledRayOrigin;\n    var clampedVoxelBoundary = (voxelStep * 0.5) + 0.5; // 0 if <= 0, 1 if > 0\n    var tMax = (voxelStep * voxelOriginDifference + clampedVoxelBoundary) * tDelta + EPSILON;\n\n    while(stepsTaken <= MAX_RAY_STEPS)\n    {\n      stepsTaken ++;\n      tIntersection = min(min(tMax.x, tMax.y), tMax.z);\n      let mask = vec3(\n          select(0.0, 1.0, tMax.x == tIntersection),\n          select(0.0, 1.0, tMax.y == tIntersection),\n          select(0.0, 1.0, tMax.z == tIntersection)\n      );\n      tMax += mask * tDelta;\n      currentIndex += mask * voxelStep;\n      objectNormal = vec3(mask * -voxelStep);\n      pos = objectRayOrigin + objectRayDirection * tIntersection;\n      let isInBounds = all(currentIndex > vec3(-1.0)) && all(currentIndex < vec3(voxelObject.size / voxelSize));\n      if(!isInBounds){\n          break;\n      }\n      // we marched further than the closest intersection, so we are "inside" voxels now\n      let isInsideAlreadyMarchedVoxel = tIntersection > closestIntersection + EPSILON;\n      if(isInsideAlreadyMarchedVoxel){\n          break;\n      }\n      if(sampleVoxel(currentIndex)){\n          closestIntersection = tIntersection;\n          normal = objectNormal;\n          colour = vec3(f32(i), 1.0 - f32(i), 0.0);\n          occlusion = true;\n          worldPos = pos;\n          break;\n      }\n    }\n  }\n\n  // output result\n  if(occlusion){\n    colour = addBasicShading(colour, normal);\n    colour = addVoxelBorderColour(colour, worldPos);\n  }\n\n  textureStore(outputTex, GlobalInvocationID.xy, vec4(colour,1));\n}\n'},693:t=>{t.exports="// Function to mimic the ease_out_expo function\nfn ease_out_expo(x: f32) -> f32 {\n    let t: f32 = x;\n    let b: f32 = 0.0;\n    let c: f32 = 1.0;\n    let d: f32 = 1.0; // Set the duration within the function\n\n    let intermediate_result: f32 = c * (-pow(2.0, -10.0 * t / d) + 1.0) + b;\n\n    return select(intermediate_result, b + c, t == d);\n\n}\n\nfn sample_sky(rayDirection: vec3<f32>) -> vec3<f32> {\n    //TODO: add this to uniforms\n    let lightDirection = normalize(vec3(1.0,1.0,0.));\n    let y = clamp(ease_out_expo(rayDirection.y * 0.66), 0.0, 1.0);\n//    let y = rayDirection.y;\n    let sunHeight = clamp(lightDirection.y, 0.0, 1.0);\n    let horizon = mix(vec3<f32>(0.95, 0.5, 0.4), vec3<f32>(0.6, 0.8, 1.0), sunHeight);\n    let sky = mix(vec3<f32>(0.55, 0.7, 0.7), vec3<f32>(0.3, 0.6, 0.95), sunHeight);\n    let sunFalloff = 0.8;\n    let sunAmount = 1.0 - ease_out_expo(length(lightDirection - rayDirection) * sunFalloff);\n//    let sunAmount = 1.0 - length(lightDirection - rayDirection) * sunFalloff;\n    let skyColour = mix(horizon, sky, y);\n    let sunColour = mix(vec3<f32>(1.8, 1.6, 1.1), vec3<f32>(1.6, 1.6, 1.4), sunHeight);\n\n    let intensity = clamp(sunHeight, 0.75, 1.0);\n    return mix(skyColour, sunColour, clamp(sunAmount, 0.0, 1.0)) * intensity;\n}"},416:(t,e,n)=>{n.r(e),n.d(e,{mat3:()=>$,mat4:()=>zt,quat:()=>ie,setDefaultType:()=>Ie,utils:()=>o,vec2:()=>z,vec3:()=>pt,vec4:()=>Ae});let r=1e-6;var o=Object.freeze({__proto__:null,get EPSILON(){return r},setEpsilon:function(t){const e=r;return r=t,e},degToRad:function(t){return t*Math.PI/180},radToDeg:function(t){return 180*t/Math.PI},lerp:function(t,e,n){return t+(e-t)*n},inverseLerp:function(t,e,n){const o=e-t;return Math.abs(e-t)<r?t:(n-t)/o},euclideanModulo:function(t,e){return(t%e+e)%e}});let i=Float32Array;function a(t){const e=i;return i=t,e}function s(t=0,e=0){const n=new i(2);return void 0!==t&&(n[0]=t,void 0!==e&&(n[1]=e)),n}let c=Float32Array;function u(t){const e=c;return c=t,e}function l(t,e,n){const r=new c(3);return void 0!==t&&(r[0]=t,void 0!==e&&(r[1]=e,void 0!==n&&(r[2]=n))),r}const f=s;function d(t,e,n){return(n=n||new i(2))[0]=t[0]-e[0],n[1]=t[1]-e[1],n}const h=d;function m(t,e,n){return(n=n||new i(2))[0]=t[0]*e,n[1]=t[1]*e,n}const v=m;function p(t,e){return(e=e||new i(2))[0]=1/t[0],e[1]=1/t[1],e}const g=p;function y(t,e){return t[0]*e[0]+t[1]*e[1]}function w(t){const e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}const b=w;function M(t){const e=t[0],n=t[1];return e*e+n*n}const x=M;function O(t,e){const n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}const S=O;function E(t,e){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}const T=E;function B(t,e){return(e=e||new i(2))[0]=t[0],e[1]=t[1],e}const _=B;function D(t,e,n){return(n=n||new i(2))[0]=t[0]*e[0],n[1]=t[1]*e[1],n}const A=D;function I(t,e,n){return(n=n||new i(2))[0]=t[0]/e[0],n[1]=t[1]/e[1],n}const P=I;var z=Object.freeze({__proto__:null,create:s,setDefaultType:a,fromValues:f,set:function(t,e,n){return(n=n||new i(2))[0]=t,n[1]=e,n},ceil:function(t,e){return(e=e||new i(2))[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},floor:function(t,e){return(e=e||new i(2))[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},round:function(t,e){return(e=e||new i(2))[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},clamp:function(t,e=0,n=1,r){return(r=r||new i(2))[0]=Math.min(n,Math.max(e,t[0])),r[1]=Math.min(n,Math.max(e,t[1])),r},add:function(t,e,n){return(n=n||new i(2))[0]=t[0]+e[0],n[1]=t[1]+e[1],n},addScaled:function(t,e,n,r){return(r=r||new i(2))[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r},angle:function(t,e){const n=t[0],r=t[1],o=t[0],i=t[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(o*o+i*i),s=a&&y(t,e)/a;return Math.acos(s)},subtract:d,sub:h,equalsApproximately:function(t,e){return Math.abs(t[0]-e[0])<r&&Math.abs(t[1]-e[1])<r},equals:function(t,e){return t[0]===e[0]&&t[1]===e[1]},lerp:function(t,e,n,r){return(r=r||new i(2))[0]=t[0]+n*(e[0]-t[0]),r[1]=t[1]+n*(e[1]-t[1]),r},lerpV:function(t,e,n,r){return(r=r||new i(2))[0]=t[0]+n[0]*(e[0]-t[0]),r[1]=t[1]+n[1]*(e[1]-t[1]),r},max:function(t,e,n){return(n=n||new i(2))[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n},min:function(t,e,n){return(n=n||new i(2))[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n},mulScalar:m,scale:v,divScalar:function(t,e,n){return(n=n||new i(2))[0]=t[0]/e,n[1]=t[1]/e,n},inverse:p,invert:g,cross:function(t,e,n){n=n||new c(3);const r=t[0]*e[1]-t[1]*e[0];return n[0]=0,n[1]=0,n[2]=r,n},dot:y,length:w,len:b,lengthSq:M,lenSq:x,distance:O,dist:S,distanceSq:E,distSq:T,normalize:function(t,e){e=e||new i(2);const n=t[0],r=t[1],o=Math.sqrt(n*n+r*r);return o>1e-5?(e[0]=n/o,e[1]=r/o):(e[0]=0,e[1]=0),e},negate:function(t,e){return(e=e||new i(2))[0]=-t[0],e[1]=-t[1],e},copy:B,clone:_,multiply:D,mul:A,divide:I,div:P,random:function(t=1,e){e=e||new i(2);const n=2*Math.random()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},zero:function(t){return(t=t||new i(2))[0]=0,t[1]=0,t},transformMat4:function(t,e,n){n=n||new i(2);const r=t[0],o=t[1];return n[0]=r*e[0]+o*e[4]+e[12],n[1]=r*e[1]+o*e[5]+e[13],n},transformMat3:function(t,e,n){n=n||new i(2);const r=t[0],o=t[1];return n[0]=e[0]*r+e[4]*o+e[8],n[1]=e[1]*r+e[5]*o+e[9],n}});let j=Float32Array;const R=new Map([[Float32Array,()=>new Float32Array(12)],[Float64Array,()=>new Float64Array(12)],[Array,()=>new Array(12).fill(0)]]);let q=R.get(Float32Array);function C(t){const e=j;return j=t,q=R.get(t),e}function V(t,e){return(e=e||q())[0]=t[0],e[1]=t[1],e[2]=t[2],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[8]=t[8],e[9]=t[9],e[10]=t[10],e}const k=V;function F(t){return(t=t||q())[0]=1,t[1]=0,t[2]=0,t[4]=0,t[5]=1,t[6]=0,t[8]=0,t[9]=0,t[10]=1,t}function L(t,e){e=e||q();const n=t[0],r=t[1],o=t[2],i=t[4],a=t[5],s=t[6],c=t[8],u=t[9],l=t[10],f=l*a-s*u,d=-l*i+s*c,h=u*i-a*c,m=1/(n*f+r*d+o*h);return e[0]=f*m,e[1]=(-l*r+o*u)*m,e[2]=(s*r-o*a)*m,e[4]=d*m,e[5]=(l*n-o*c)*m,e[6]=(-s*n+o*i)*m,e[8]=h*m,e[9]=(-u*n+r*c)*m,e[10]=(a*n-r*i)*m,e}const U=L;function N(t,e,n){n=n||q();const r=t[0],o=t[1],i=t[2],a=t[4],s=t[5],c=t[6],u=t[8],l=t[9],f=t[10],d=e[0],h=e[1],m=e[2],v=e[4],p=e[5],g=e[6],y=e[8],w=e[9],b=e[10];return n[0]=r*d+a*h+u*m,n[1]=o*d+s*h+l*m,n[2]=i*d+c*h+f*m,n[4]=r*v+a*p+u*g,n[5]=o*v+s*p+l*g,n[6]=i*v+c*p+f*g,n[8]=r*y+a*w+u*b,n[9]=o*y+s*w+l*b,n[10]=i*y+c*w+f*b,n}const W=N;var $=Object.freeze({__proto__:null,setDefaultType:C,create:function(t,e,n,r,o,i,a,s,c){const u=q();return u[3]=0,u[7]=0,u[11]=0,void 0!==t&&(u[0]=t,void 0!==e&&(u[1]=e,void 0!==n&&(u[2]=n,void 0!==r&&(u[4]=r,void 0!==o&&(u[5]=o,void 0!==i&&(u[6]=i,void 0!==a&&(u[8]=a,void 0!==s&&(u[9]=s,void 0!==c&&(u[10]=c))))))))),u},set:function(t,e,n,r,o,i,a,s,c,u){return(u=u||q())[0]=t,u[1]=e,u[2]=n,u[3]=0,u[4]=r,u[5]=o,u[6]=i,u[7]=0,u[8]=a,u[9]=s,u[10]=c,u[11]=0,u},fromMat4:function(t,e){return(e=e||q())[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=0,e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=0,e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=0,e},fromQuat:function(t,e){e=e||q();const n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,s=r+r,c=o+o,u=n*a,l=r*a,f=r*s,d=o*a,h=o*s,m=o*c,v=i*a,p=i*s,g=i*c;return e[0]=1-f-m,e[1]=l+g,e[2]=d-p,e[3]=0,e[4]=l-g,e[5]=1-u-m,e[6]=h+v,e[7]=0,e[8]=d+p,e[9]=h-v,e[10]=1-u-f,e[11]=0,e},negate:function(t,e){return(e=e||q())[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e},copy:V,clone:k,equalsApproximately:function(t,e){return Math.abs(t[0]-e[0])<r&&Math.abs(t[1]-e[1])<r&&Math.abs(t[2]-e[2])<r&&Math.abs(t[4]-e[4])<r&&Math.abs(t[5]-e[5])<r&&Math.abs(t[6]-e[6])<r&&Math.abs(t[8]-e[8])<r&&Math.abs(t[9]-e[9])<r&&Math.abs(t[10]-e[10])<r},equals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]},identity:F,transpose:function(t,e){if((e=e||q())===t){let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,e}const n=t[0],r=t[1],o=t[2],i=t[4],a=t[5],s=t[6],c=t[8],u=t[9],l=t[10];return e[0]=n,e[1]=i,e[2]=c,e[4]=r,e[5]=a,e[6]=u,e[8]=o,e[9]=s,e[10]=l,e},inverse:L,determinant:function(t){const e=t[0],n=t[1],r=t[2],o=t[4],i=t[5],a=t[6],s=t[8],c=t[9],u=t[10];return e*(i*u-c*a)-o*(n*u-c*r)+s*(n*a-i*r)},invert:U,multiply:N,mul:W,setTranslation:function(t,e,n){return t!==(n=n||F())&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[4]=t[4],n[5]=t[5],n[6]=t[6]),n[8]=e[0],n[9]=e[1],n[10]=1,n},getTranslation:function(t,e){return(e=e||s())[0]=t[8],e[1]=t[9],e},getAxis:function(t,e,n){const r=4*e;return(n=n||s())[0]=t[r+0],n[1]=t[r+1],n},setAxis:function(t,e,n,r){r!==t&&(r=V(t,r));const o=4*n;return r[o+0]=e[0],r[o+1]=e[1],r},getScaling:function(t,e){e=e||s();const n=t[0],r=t[1],o=t[4],i=t[5];return e[0]=Math.sqrt(n*n+r*r),e[1]=Math.sqrt(o*o+i*i),e},translation:function(t,e){return(e=e||q())[0]=1,e[1]=0,e[2]=0,e[4]=0,e[5]=1,e[6]=0,e[8]=t[0],e[9]=t[1],e[10]=1,e},translate:function(t,e,n){n=n||q();const r=e[0],o=e[1],i=t[0],a=t[1],s=t[2],c=t[4],u=t[5],l=t[6],f=t[8],d=t[9],h=t[10];return t!==n&&(n[0]=i,n[1]=a,n[2]=s,n[4]=c,n[5]=u,n[6]=l),n[8]=i*r+c*o+f,n[9]=a*r+u*o+d,n[10]=s*r+l*o+h,n},rotation:function(t,e){e=e||q();const n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=r,e[2]=0,e[4]=-r,e[5]=n,e[6]=0,e[8]=0,e[9]=0,e[10]=1,e},rotate:function(t,e,n){n=n||q();const r=t[0],o=t[1],i=t[2],a=t[4],s=t[5],c=t[6],u=Math.cos(e),l=Math.sin(e);return n[0]=u*r+l*a,n[1]=u*o+l*s,n[2]=u*i+l*c,n[4]=u*a-l*r,n[5]=u*s-l*o,n[6]=u*c-l*i,t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10]),n},scaling:function(t,e){return(e=e||q())[0]=t[0],e[1]=0,e[2]=0,e[4]=0,e[5]=t[1],e[6]=0,e[8]=0,e[9]=0,e[10]=1,e},scale:function(t,e,n){n=n||q();const r=e[0],o=e[1];return n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[4]=o*t[4],n[5]=o*t[5],n[6]=o*t[6],t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10]),n},uniformScaling:function(t,e){return(e=e||q())[0]=t,e[1]=0,e[2]=0,e[4]=0,e[5]=t,e[6]=0,e[8]=0,e[9]=0,e[10]=1,e},uniformScale:function(t,e,n){return(n=n||q())[0]=e*t[0],n[1]=e*t[1],n[2]=e*t[2],n[4]=e*t[4],n[5]=e*t[5],n[6]=e*t[6],t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10]),n}});const G=l;function H(t,e,n){return(n=n||new c(3))[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}const X=H;function Y(t,e,n){return(n=n||new c(3))[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n}const Z=Y;function K(t,e){return(e=e||new c(3))[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}const J=K;function Q(t,e,n){n=n||new c(3);const r=t[2]*e[0]-t[0]*e[2],o=t[0]*e[1]-t[1]*e[0];return n[0]=t[1]*e[2]-t[2]*e[1],n[1]=r,n[2]=o,n}function tt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function et(t){const e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}const nt=et;function rt(t){const e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}const ot=rt;function it(t,e){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)}const at=it;function st(t,e){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o}const ct=st;function ut(t,e){e=e||new c(3);const n=t[0],r=t[1],o=t[2],i=Math.sqrt(n*n+r*r+o*o);return i>1e-5?(e[0]=n/i,e[1]=r/i,e[2]=o/i):(e[0]=0,e[1]=0,e[2]=0),e}function lt(t,e){return(e=e||new c(3))[0]=t[0],e[1]=t[1],e[2]=t[2],e}const ft=lt;function dt(t,e,n){return(n=n||new c(3))[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n}const ht=dt;function mt(t,e,n){return(n=n||new c(3))[0]=t[0]/e[0],n[1]=t[1]/e[1],n[2]=t[2]/e[2],n}const vt=mt;var pt=Object.freeze({__proto__:null,create:l,setDefaultType:u,fromValues:G,set:function(t,e,n,r){return(r=r||new c(3))[0]=t,r[1]=e,r[2]=n,r},ceil:function(t,e){return(e=e||new c(3))[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(t,e){return(e=e||new c(3))[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},round:function(t,e){return(e=e||new c(3))[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},clamp:function(t,e=0,n=1,r){return(r=r||new c(3))[0]=Math.min(n,Math.max(e,t[0])),r[1]=Math.min(n,Math.max(e,t[1])),r[2]=Math.min(n,Math.max(e,t[2])),r},add:function(t,e,n){return(n=n||new c(3))[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n},addScaled:function(t,e,n,r){return(r=r||new c(3))[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r},angle:function(t,e){const n=t[0],r=t[1],o=t[2],i=t[0],a=t[1],s=t[2],c=Math.sqrt(n*n+r*r+o*o)*Math.sqrt(i*i+a*a+s*s),u=c&&tt(t,e)/c;return Math.acos(u)},subtract:H,sub:X,equalsApproximately:function(t,e){return Math.abs(t[0]-e[0])<r&&Math.abs(t[1]-e[1])<r&&Math.abs(t[2]-e[2])<r},equals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},lerp:function(t,e,n,r){return(r=r||new c(3))[0]=t[0]+n*(e[0]-t[0]),r[1]=t[1]+n*(e[1]-t[1]),r[2]=t[2]+n*(e[2]-t[2]),r},lerpV:function(t,e,n,r){return(r=r||new c(3))[0]=t[0]+n[0]*(e[0]-t[0]),r[1]=t[1]+n[1]*(e[1]-t[1]),r[2]=t[2]+n[2]*(e[2]-t[2]),r},max:function(t,e,n){return(n=n||new c(3))[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n},min:function(t,e,n){return(n=n||new c(3))[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.min(t[2],e[2]),n},mulScalar:Y,scale:Z,divScalar:function(t,e,n){return(n=n||new c(3))[0]=t[0]/e,n[1]=t[1]/e,n[2]=t[2]/e,n},inverse:K,invert:J,cross:Q,dot:tt,length:et,len:nt,lengthSq:rt,lenSq:ot,distance:it,dist:at,distanceSq:st,distSq:ct,normalize:ut,negate:function(t,e){return(e=e||new c(3))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},copy:lt,clone:ft,multiply:dt,mul:ht,divide:mt,div:vt,random:function(t=1,e){e=e||new c(3);const n=2*Math.random()*Math.PI,r=2*Math.random()-1,o=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=r*t,e},zero:function(t){return(t=t||new c(3))[0]=0,t[1]=0,t[2]=0,t},transformMat4:function(t,e,n){n=n||new c(3);const r=t[0],o=t[1],i=t[2],a=e[3]*r+e[7]*o+e[11]*i+e[15]||1;return n[0]=(e[0]*r+e[4]*o+e[8]*i+e[12])/a,n[1]=(e[1]*r+e[5]*o+e[9]*i+e[13])/a,n[2]=(e[2]*r+e[6]*o+e[10]*i+e[14])/a,n},transformMat4Upper3x3:function(t,e,n){n=n||new c(3);const r=t[0],o=t[1],i=t[2];return n[0]=r*e[0]+o*e[4]+i*e[8],n[1]=r*e[1]+o*e[5]+i*e[9],n[2]=r*e[2]+o*e[6]+i*e[10],n},transformMat3:function(t,e,n){n=n||new c(3);const r=t[0],o=t[1],i=t[2];return n[0]=r*e[0]+o*e[4]+i*e[8],n[1]=r*e[1]+o*e[5]+i*e[9],n[2]=r*e[2]+o*e[6]+i*e[10],n},transformQuat:function(t,e,n){n=n||new c(3);const r=e[0],o=e[1],i=e[2],a=2*e[3],s=t[0],u=t[1],l=t[2],f=o*l-i*u,d=i*s-r*l,h=r*u-o*s;return n[0]=s+f*a+2*(o*h-i*d),n[1]=u+d*a+2*(i*f-r*h),n[2]=l+h*a+2*(r*d-o*f),n},getTranslation:function(t,e){return(e=e||new c(3))[0]=t[12],e[1]=t[13],e[2]=t[14],e},getAxis:function(t,e,n){const r=4*e;return(n=n||new c(3))[0]=t[r+0],n[1]=t[r+1],n[2]=t[r+2],n},getScaling:function(t,e){e=e||new c(3);const n=t[0],r=t[1],o=t[2],i=t[4],a=t[5],s=t[6],u=t[8],l=t[9],f=t[10];return e[0]=Math.sqrt(n*n+r*r+o*o),e[1]=Math.sqrt(i*i+a*a+s*s),e[2]=Math.sqrt(u*u+l*l+f*f),e}});let gt=Float32Array;function yt(t){const e=gt;return gt=t,e}function wt(t,e){return(e=e||new gt(16))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}const bt=wt;function Mt(t){return(t=t||new gt(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function xt(t,e){e=e||new gt(16);const n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],c=t[6],u=t[7],l=t[8],f=t[9],d=t[10],h=t[11],m=t[12],v=t[13],p=t[14],g=t[15],y=d*g,w=p*h,b=c*g,M=p*u,x=c*h,O=d*u,S=o*g,E=p*i,T=o*h,B=d*i,_=o*u,D=c*i,A=l*v,I=m*f,P=a*v,z=m*s,j=a*f,R=l*s,q=n*v,C=m*r,V=n*f,k=l*r,F=n*s,L=a*r,U=y*s+M*f+x*v-(w*s+b*f+O*v),N=w*r+S*f+B*v-(y*r+E*f+T*v),W=b*r+E*s+_*v-(M*r+S*s+D*v),$=O*r+T*s+D*f-(x*r+B*s+_*f),G=1/(n*U+a*N+l*W+m*$);return e[0]=G*U,e[1]=G*N,e[2]=G*W,e[3]=G*$,e[4]=G*(w*a+b*l+O*m-(y*a+M*l+x*m)),e[5]=G*(y*n+E*l+T*m-(w*n+S*l+B*m)),e[6]=G*(M*n+S*a+D*m-(b*n+E*a+_*m)),e[7]=G*(x*n+B*a+_*l-(O*n+T*a+D*l)),e[8]=G*(A*u+z*h+j*g-(I*u+P*h+R*g)),e[9]=G*(I*i+q*h+k*g-(A*i+C*h+V*g)),e[10]=G*(P*i+C*u+F*g-(z*i+q*u+L*g)),e[11]=G*(R*i+V*u+L*h-(j*i+k*u+F*h)),e[12]=G*(P*d+R*p+I*c-(j*p+A*c+z*d)),e[13]=G*(V*p+A*o+C*d-(q*d+k*p+I*o)),e[14]=G*(q*c+L*p+z*o-(F*p+P*o+C*c)),e[15]=G*(F*d+j*o+k*c-(V*c+L*d+R*o)),e}const Ot=xt;function St(t,e,n){n=n||new gt(16);const r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],u=t[6],l=t[7],f=t[8],d=t[9],h=t[10],m=t[11],v=t[12],p=t[13],g=t[14],y=t[15],w=e[0],b=e[1],M=e[2],x=e[3],O=e[4],S=e[5],E=e[6],T=e[7],B=e[8],_=e[9],D=e[10],A=e[11],I=e[12],P=e[13],z=e[14],j=e[15];return n[0]=r*w+s*b+f*M+v*x,n[1]=o*w+c*b+d*M+p*x,n[2]=i*w+u*b+h*M+g*x,n[3]=a*w+l*b+m*M+y*x,n[4]=r*O+s*S+f*E+v*T,n[5]=o*O+c*S+d*E+p*T,n[6]=i*O+u*S+h*E+g*T,n[7]=a*O+l*S+m*E+y*T,n[8]=r*B+s*_+f*D+v*A,n[9]=o*B+c*_+d*D+p*A,n[10]=i*B+u*_+h*D+g*A,n[11]=a*B+l*_+m*D+y*A,n[12]=r*I+s*P+f*z+v*j,n[13]=o*I+c*P+d*z+p*j,n[14]=i*I+u*P+h*z+g*j,n[15]=a*I+l*P+m*z+y*j,n}const Et=St;let Tt,Bt,_t;function Dt(t,e,n){n=n||new gt(16);let r=t[0],o=t[1],i=t[2];const a=Math.sqrt(r*r+o*o+i*i);r/=a,o/=a,i/=a;const s=r*r,c=o*o,u=i*i,l=Math.cos(e),f=Math.sin(e),d=1-l;return n[0]=s+(1-s)*l,n[1]=r*o*d+i*f,n[2]=r*i*d-o*f,n[3]=0,n[4]=r*o*d-i*f,n[5]=c+(1-c)*l,n[6]=o*i*d+r*f,n[7]=0,n[8]=r*i*d+o*f,n[9]=o*i*d-r*f,n[10]=u+(1-u)*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}const At=Dt;function It(t,e,n,r){r=r||new gt(16);let o=e[0],i=e[1],a=e[2];const s=Math.sqrt(o*o+i*i+a*a);o/=s,i/=s,a/=s;const c=o*o,u=i*i,l=a*a,f=Math.cos(n),d=Math.sin(n),h=1-f,m=c+(1-c)*f,v=o*i*h+a*d,p=o*a*h-i*d,g=o*i*h-a*d,y=u+(1-u)*f,w=i*a*h+o*d,b=o*a*h+i*d,M=i*a*h-o*d,x=l+(1-l)*f,O=t[0],S=t[1],E=t[2],T=t[3],B=t[4],_=t[5],D=t[6],A=t[7],I=t[8],P=t[9],z=t[10],j=t[11];return r[0]=m*O+v*B+p*I,r[1]=m*S+v*_+p*P,r[2]=m*E+v*D+p*z,r[3]=m*T+v*A+p*j,r[4]=g*O+y*B+w*I,r[5]=g*S+y*_+w*P,r[6]=g*E+y*D+w*z,r[7]=g*T+y*A+w*j,r[8]=b*O+M*B+x*I,r[9]=b*S+M*_+x*P,r[10]=b*E+M*D+x*z,r[11]=b*T+M*A+x*j,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r}const Pt=It;var zt=Object.freeze({__proto__:null,setDefaultType:yt,create:function(t,e,n,r,o,i,a,s,c,u,l,f,d,h,m,v){const p=new gt(16);return void 0!==t&&(p[0]=t,void 0!==e&&(p[1]=e,void 0!==n&&(p[2]=n,void 0!==r&&(p[3]=r,void 0!==o&&(p[4]=o,void 0!==i&&(p[5]=i,void 0!==a&&(p[6]=a,void 0!==s&&(p[7]=s,void 0!==c&&(p[8]=c,void 0!==u&&(p[9]=u,void 0!==l&&(p[10]=l,void 0!==f&&(p[11]=f,void 0!==d&&(p[12]=d,void 0!==h&&(p[13]=h,void 0!==m&&(p[14]=m,void 0!==v&&(p[15]=v)))))))))))))))),p},set:function(t,e,n,r,o,i,a,s,c,u,l,f,d,h,m,v,p){return(p=p||new gt(16))[0]=t,p[1]=e,p[2]=n,p[3]=r,p[4]=o,p[5]=i,p[6]=a,p[7]=s,p[8]=c,p[9]=u,p[10]=l,p[11]=f,p[12]=d,p[13]=h,p[14]=m,p[15]=v,p},fromMat3:function(t,e){return(e=e||new gt(16))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=0,e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=0,e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromQuat:function(t,e){e=e||new gt(16);const n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,s=r+r,c=o+o,u=n*a,l=r*a,f=r*s,d=o*a,h=o*s,m=o*c,v=i*a,p=i*s,g=i*c;return e[0]=1-f-m,e[1]=l+g,e[2]=d-p,e[3]=0,e[4]=l-g,e[5]=1-u-m,e[6]=h+v,e[7]=0,e[8]=d+p,e[9]=h-v,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},negate:function(t,e){return(e=e||new gt(16))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},copy:wt,clone:bt,equalsApproximately:function(t,e){return Math.abs(t[0]-e[0])<r&&Math.abs(t[1]-e[1])<r&&Math.abs(t[2]-e[2])<r&&Math.abs(t[3]-e[3])<r&&Math.abs(t[4]-e[4])<r&&Math.abs(t[5]-e[5])<r&&Math.abs(t[6]-e[6])<r&&Math.abs(t[7]-e[7])<r&&Math.abs(t[8]-e[8])<r&&Math.abs(t[9]-e[9])<r&&Math.abs(t[10]-e[10])<r&&Math.abs(t[11]-e[11])<r&&Math.abs(t[12]-e[12])<r&&Math.abs(t[13]-e[13])<r&&Math.abs(t[14]-e[14])<r&&Math.abs(t[15]-e[15])<r},equals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},identity:Mt,transpose:function(t,e){if((e=e||new gt(16))===t){let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,e}const n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],c=t[6],u=t[7],l=t[8],f=t[9],d=t[10],h=t[11],m=t[12],v=t[13],p=t[14],g=t[15];return e[0]=n,e[1]=a,e[2]=l,e[3]=m,e[4]=r,e[5]=s,e[6]=f,e[7]=v,e[8]=o,e[9]=c,e[10]=d,e[11]=p,e[12]=i,e[13]=u,e[14]=h,e[15]=g,e},inverse:xt,determinant:function(t){const e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],s=t[6],c=t[7],u=t[8],l=t[9],f=t[10],d=t[11],h=t[12],m=t[13],v=t[14],p=t[15],g=f*p,y=v*d,w=s*p,b=v*c,M=s*d,x=f*c,O=r*p,S=v*o,E=r*d,T=f*o,B=r*c,_=s*o;return e*(g*a+b*l+M*m-(y*a+w*l+x*m))+i*(y*n+O*l+T*m-(g*n+S*l+E*m))+u*(w*n+S*a+B*m-(b*n+O*a+_*m))+h*(x*n+E*a+_*l-(M*n+T*a+B*l))},invert:Ot,multiply:St,mul:Et,setTranslation:function(t,e,n){return t!==(n=n||Mt())&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11]),n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},getTranslation:function(t,e){return(e=e||l())[0]=t[12],e[1]=t[13],e[2]=t[14],e},getAxis:function(t,e,n){const r=4*e;return(n=n||l())[0]=t[r+0],n[1]=t[r+1],n[2]=t[r+2],n},setAxis:function(t,e,n,r){r!==t&&(r=wt(t,r));const o=4*n;return r[o+0]=e[0],r[o+1]=e[1],r[o+2]=e[2],r},getScaling:function(t,e){e=e||l();const n=t[0],r=t[1],o=t[2],i=t[4],a=t[5],s=t[6],c=t[8],u=t[9],f=t[10];return e[0]=Math.sqrt(n*n+r*r+o*o),e[1]=Math.sqrt(i*i+a*a+s*s),e[2]=Math.sqrt(c*c+u*u+f*f),e},perspective:function(t,e,n,r,o){o=o||new gt(16);const i=Math.tan(.5*Math.PI-.5*t);if(o[0]=i/e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,r===1/0)o[10]=-1,o[14]=-n;else{const t=1/(n-r);o[10]=r*t,o[14]=r*n*t}return o},ortho:function(t,e,n,r,o,i,a){return(a=a||new gt(16))[0]=2/(e-t),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(r-n),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1/(o-i),a[11]=0,a[12]=(e+t)/(t-e),a[13]=(r+n)/(n-r),a[14]=o/(o-i),a[15]=1,a},frustum:function(t,e,n,r,o,i,a){const s=e-t,c=r-n,u=o-i;return(a=a||new gt(16))[0]=2*o/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*o/c,a[6]=0,a[7]=0,a[8]=(t+e)/s,a[9]=(r+n)/c,a[10]=i/u,a[11]=-1,a[12]=0,a[13]=0,a[14]=o*i/u,a[15]=0,a},aim:function(t,e,n,r){return r=r||new gt(16),Tt=Tt||l(),Bt=Bt||l(),_t=_t||l(),ut(H(e,t,_t),_t),ut(Q(n,_t,Tt),Tt),ut(Q(_t,Tt,Bt),Bt),r[0]=Tt[0],r[1]=Tt[1],r[2]=Tt[2],r[3]=0,r[4]=Bt[0],r[5]=Bt[1],r[6]=Bt[2],r[7]=0,r[8]=_t[0],r[9]=_t[1],r[10]=_t[2],r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},cameraAim:function(t,e,n,r){return r=r||new gt(16),Tt=Tt||l(),Bt=Bt||l(),_t=_t||l(),ut(H(t,e,_t),_t),ut(Q(n,_t,Tt),Tt),ut(Q(_t,Tt,Bt),Bt),r[0]=Tt[0],r[1]=Tt[1],r[2]=Tt[2],r[3]=0,r[4]=Bt[0],r[5]=Bt[1],r[6]=Bt[2],r[7]=0,r[8]=_t[0],r[9]=_t[1],r[10]=_t[2],r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},lookAt:function(t,e,n,r){return r=r||new gt(16),Tt=Tt||l(),Bt=Bt||l(),_t=_t||l(),ut(H(t,e,_t),_t),ut(Q(n,_t,Tt),Tt),ut(Q(_t,Tt,Bt),Bt),r[0]=Tt[0],r[1]=Bt[0],r[2]=_t[0],r[3]=0,r[4]=Tt[1],r[5]=Bt[1],r[6]=_t[1],r[7]=0,r[8]=Tt[2],r[9]=Bt[2],r[10]=_t[2],r[11]=0,r[12]=-(Tt[0]*t[0]+Tt[1]*t[1]+Tt[2]*t[2]),r[13]=-(Bt[0]*t[0]+Bt[1]*t[1]+Bt[2]*t[2]),r[14]=-(_t[0]*t[0]+_t[1]*t[1]+_t[2]*t[2]),r[15]=1,r},translation:function(t,e){return(e=e||new gt(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},translate:function(t,e,n){n=n||new gt(16);const r=e[0],o=e[1],i=e[2],a=t[0],s=t[1],c=t[2],u=t[3],l=t[4],f=t[5],d=t[6],h=t[7],m=t[8],v=t[9],p=t[10],g=t[11],y=t[12],w=t[13],b=t[14],M=t[15];return t!==n&&(n[0]=a,n[1]=s,n[2]=c,n[3]=u,n[4]=l,n[5]=f,n[6]=d,n[7]=h,n[8]=m,n[9]=v,n[10]=p,n[11]=g),n[12]=a*r+l*o+m*i+y,n[13]=s*r+f*o+v*i+w,n[14]=c*r+d*o+p*i+b,n[15]=u*r+h*o+g*i+M,n},rotationX:function(t,e){e=e||new gt(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotateX:function(t,e,n){n=n||new gt(16);const r=t[4],o=t[5],i=t[6],a=t[7],s=t[8],c=t[9],u=t[10],l=t[11],f=Math.cos(e),d=Math.sin(e);return n[4]=f*r+d*s,n[5]=f*o+d*c,n[6]=f*i+d*u,n[7]=f*a+d*l,n[8]=f*s-d*r,n[9]=f*c-d*o,n[10]=f*u-d*i,n[11]=f*l-d*a,t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotationY:function(t,e){e=e||new gt(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotateY:function(t,e,n){n=n||new gt(16);const r=t[0],o=t[1],i=t[2],a=t[3],s=t[8],c=t[9],u=t[10],l=t[11],f=Math.cos(e),d=Math.sin(e);return n[0]=f*r-d*s,n[1]=f*o-d*c,n[2]=f*i-d*u,n[3]=f*a-d*l,n[8]=f*s+d*r,n[9]=f*c+d*o,n[10]=f*u+d*i,n[11]=f*l+d*a,t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotationZ:function(t,e){e=e||new gt(16);const n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotateZ:function(t,e,n){n=n||new gt(16);const r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],u=t[6],l=t[7],f=Math.cos(e),d=Math.sin(e);return n[0]=f*r+d*s,n[1]=f*o+d*c,n[2]=f*i+d*u,n[3]=f*a+d*l,n[4]=f*s-d*r,n[5]=f*c-d*o,n[6]=f*u-d*i,n[7]=f*l-d*a,t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},axisRotation:Dt,rotation:At,axisRotate:It,rotate:Pt,scaling:function(t,e){return(e=e||new gt(16))[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},scale:function(t,e,n){n=n||new gt(16);const r=e[0],o=e[1],i=e[2];return n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=r*t[3],n[4]=o*t[4],n[5]=o*t[5],n[6]=o*t[6],n[7]=o*t[7],n[8]=i*t[8],n[9]=i*t[9],n[10]=i*t[10],n[11]=i*t[11],t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},uniformScaling:function(t,e){return(e=e||new gt(16))[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},uniformScale:function(t,e,n){return(n=n||new gt(16))[0]=e*t[0],n[1]=e*t[1],n[2]=e*t[2],n[3]=e*t[3],n[4]=e*t[4],n[5]=e*t[5],n[6]=e*t[6],n[7]=e*t[7],n[8]=e*t[8],n[9]=e*t[9],n[10]=e*t[10],n[11]=e*t[11],t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n}});let jt=Float32Array;function Rt(t){const e=jt;return jt=t,e}function qt(t,e,n,r){const o=new jt(4);return void 0!==t&&(o[0]=t,void 0!==e&&(o[1]=e,void 0!==n&&(o[2]=n,void 0!==r&&(o[3]=r)))),o}const Ct=qt;function Vt(t,e,n){n=n||new jt(4);const r=.5*e,o=Math.sin(r);return n[0]=o*t[0],n[1]=o*t[1],n[2]=o*t[2],n[3]=Math.cos(r),n}function kt(t,e,n){n=n||new jt(4);const r=t[0],o=t[1],i=t[2],a=t[3],s=e[0],c=e[1],u=e[2],l=e[3];return n[0]=r*l+a*s+o*u-i*c,n[1]=o*l+a*c+i*s-r*u,n[2]=i*l+a*u+r*c-o*s,n[3]=a*l-r*s-o*c-i*u,n}const Ft=kt;function Lt(t,e,n,o){o=o||new jt(4);const i=t[0],a=t[1],s=t[2],c=t[3];let u,l,f=e[0],d=e[1],h=e[2],m=e[3],v=i*f+a*d+s*h+c*m;if(v<0&&(v=-v,f=-f,d=-d,h=-h,m=-m),1-v>r){const t=Math.acos(v),e=Math.sin(t);u=Math.sin((1-n)*t)/e,l=Math.sin(n*t)/e}else u=1-n,l=n;return o[0]=u*i+l*f,o[1]=u*a+l*d,o[2]=u*s+l*h,o[3]=u*c+l*m,o}function Ut(t,e){return(e=e||new jt(4))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}const Nt=Ut;function Wt(t,e,n){return(n=n||new jt(4))[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n}const $t=Wt;function Gt(t,e,n){return(n=n||new jt(4))[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n}const Ht=Gt;function Xt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Yt(t){const e=t[0],n=t[1],r=t[2],o=t[3];return Math.sqrt(e*e+n*n+r*r+o*o)}const Zt=Yt;function Kt(t){const e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}const Jt=Kt;function Qt(t,e){e=e||new jt(4);const n=t[0],r=t[1],o=t[2],i=t[3],a=Math.sqrt(n*n+r*r+o*o+i*i);return a>1e-5?(e[0]=n/a,e[1]=r/a,e[2]=o/a,e[3]=i/a):(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}let te,ee,ne,re,oe;var ie=Object.freeze({__proto__:null,create:qt,setDefaultType:Rt,fromValues:Ct,set:function(t,e,n,r,o){return(o=o||new jt(4))[0]=t,o[1]=e,o[2]=n,o[3]=r,o},fromAxisAngle:Vt,toAxisAngle:function(t,e){e=e||l(4);const n=2*Math.acos(t[3]),o=Math.sin(.5*n);return o>r?(e[0]=t[0]/o,e[1]=t[1]/o,e[2]=t[2]/o):(e[0]=1,e[1]=0,e[2]=0),{angle:n,axis:e}},angle:function(t,e){const n=Xt(t,e);return Math.acos(2*n*n-1)},multiply:kt,mul:Ft,rotateX:function(t,e,n){n=n||new jt(4);const r=.5*e,o=t[0],i=t[1],a=t[2],s=t[3],c=Math.sin(r),u=Math.cos(r);return n[0]=o*u+s*c,n[1]=i*u+a*c,n[2]=a*u-i*c,n[3]=s*u-o*c,n},rotateY:function(t,e,n){n=n||new jt(4);const r=.5*e,o=t[0],i=t[1],a=t[2],s=t[3],c=Math.sin(r),u=Math.cos(r);return n[0]=o*u-a*c,n[1]=i*u+s*c,n[2]=a*u+o*c,n[3]=s*u-i*c,n},rotateZ:function(t,e,n){n=n||new jt(4);const r=.5*e,o=t[0],i=t[1],a=t[2],s=t[3],c=Math.sin(r),u=Math.cos(r);return n[0]=o*u+i*c,n[1]=i*u-o*c,n[2]=a*u+s*c,n[3]=s*u-a*c,n},slerp:Lt,inverse:function(t,e){e=e||new jt(4);const n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-o*s,e[3]=i*s,e},conjugate:function(t,e){return(e=e||new jt(4))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},fromMat:function(t,e){e=e||new jt(4);const n=t[0]+t[5]+t[10];if(n>0){const r=Math.sqrt(n+1);e[3]=.5*r;const o=.5/r;e[0]=(t[6]-t[9])*o,e[1]=(t[8]-t[2])*o,e[2]=(t[1]-t[4])*o}else{let n=0;t[5]>t[0]&&(n=1),t[10]>t[4*n+n]&&(n=2);const r=(n+1)%3,o=(n+2)%3,i=Math.sqrt(t[4*n+n]-t[4*r+r]-t[4*o+o]+1);e[n]=.5*i;const a=.5/i;e[3]=(t[4*r+o]-t[4*o+r])*a,e[r]=(t[4*r+n]+t[4*n+r])*a,e[o]=(t[4*o+n]+t[4*n+o])*a}return e},fromEuler:function(t,e,n,r,o){o=o||new jt(4);const i=.5*t,a=.5*e,s=.5*n,c=Math.sin(i),u=Math.cos(i),l=Math.sin(a),f=Math.cos(a),d=Math.sin(s),h=Math.cos(s);switch(r){case"xyz":o[0]=c*f*h+u*l*d,o[1]=u*l*h-c*f*d,o[2]=u*f*d+c*l*h,o[3]=u*f*h-c*l*d;break;case"xzy":o[0]=c*f*h-u*l*d,o[1]=u*l*h-c*f*d,o[2]=u*f*d+c*l*h,o[3]=u*f*h+c*l*d;break;case"yxz":o[0]=c*f*h+u*l*d,o[1]=u*l*h-c*f*d,o[2]=u*f*d-c*l*h,o[3]=u*f*h+c*l*d;break;case"yzx":o[0]=c*f*h+u*l*d,o[1]=u*l*h+c*f*d,o[2]=u*f*d-c*l*h,o[3]=u*f*h-c*l*d;break;case"zxy":o[0]=c*f*h-u*l*d,o[1]=u*l*h+c*f*d,o[2]=u*f*d+c*l*h,o[3]=u*f*h-c*l*d;break;case"zyx":o[0]=c*f*h-u*l*d,o[1]=u*l*h+c*f*d,o[2]=u*f*d-c*l*h,o[3]=u*f*h+c*l*d;break;default:throw new Error(`Unknown rotation order: ${r}`)}return o},copy:Ut,clone:Nt,add:function(t,e,n){return(n=n||new jt(4))[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n},subtract:Wt,sub:$t,mulScalar:Gt,scale:Ht,divScalar:function(t,e,n){return(n=n||new jt(4))[0]=t[0]/e,n[1]=t[1]/e,n[2]=t[2]/e,n[3]=t[3]/e,n},dot:Xt,lerp:function(t,e,n,r){return(r=r||new jt(4))[0]=t[0]+n*(e[0]-t[0]),r[1]=t[1]+n*(e[1]-t[1]),r[2]=t[2]+n*(e[2]-t[2]),r[3]=t[3]+n*(e[3]-t[3]),r},length:Yt,len:Zt,lengthSq:Kt,lenSq:Jt,normalize:Qt,equalsApproximately:function(t,e){return Math.abs(t[0]-e[0])<r&&Math.abs(t[1]-e[1])<r&&Math.abs(t[2]-e[2])<r&&Math.abs(t[3]-e[3])<r},equals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},identity:function(t){return(t=t||new jt(4))[0]=0,t[1]=0,t[2]=0,t[3]=1,t},rotationTo:function(t,e,n){n=n||new jt(4),te=te||l(),ee=ee||l(1,0,0),ne=ne||l(0,1,0);const r=tt(t,e);return r<-.999999?(Q(ee,t,te),nt(te)<1e-6&&Q(ne,t,te),ut(te,te),Vt(te,Math.PI,n),n):r>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Q(t,e,te),n[0]=te[0],n[1]=te[1],n[2]=te[2],n[3]=1+r,Qt(n,n))},sqlerp:function(t,e,n,r,o,i){return i=i||new jt(4),re=re||new jt(4),oe=oe||new jt(4),Lt(t,r,o,re),Lt(e,n,o,oe),Lt(re,oe,2*o*(1-o),i),i}});let ae=Float32Array;function se(t){const e=ae;return ae=t,e}function ce(t,e,n,r){const o=new ae(4);return void 0!==t&&(o[0]=t,void 0!==e&&(o[1]=e,void 0!==n&&(o[2]=n,void 0!==r&&(o[3]=r)))),o}const ue=ce;function le(t,e,n){return(n=n||new ae(4))[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n}const fe=le;function de(t,e,n){return(n=n||new ae(4))[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n}const he=de;function me(t,e){return(e=e||new ae(4))[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}const ve=me;function pe(t){const e=t[0],n=t[1],r=t[2],o=t[3];return Math.sqrt(e*e+n*n+r*r+o*o)}const ge=pe;function ye(t){const e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}const we=ye;function be(t,e){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(n*n+r*r+o*o+i*i)}const Me=be;function xe(t,e){const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return n*n+r*r+o*o+i*i}const Oe=xe;function Se(t,e){return(e=e||new ae(4))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}const Ee=Se;function Te(t,e,n){return(n=n||new ae(4))[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n[3]=t[3]*e[3],n}const Be=Te;function _e(t,e,n){return(n=n||new ae(4))[0]=t[0]/e[0],n[1]=t[1]/e[1],n[2]=t[2]/e[2],n[3]=t[3]/e[3],n}const De=_e;var Ae=Object.freeze({__proto__:null,create:ce,setDefaultType:se,fromValues:ue,set:function(t,e,n,r,o){return(o=o||new ae(4))[0]=t,o[1]=e,o[2]=n,o[3]=r,o},ceil:function(t,e){return(e=e||new ae(4))[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},floor:function(t,e){return(e=e||new ae(4))[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},round:function(t,e){return(e=e||new ae(4))[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},clamp:function(t,e=0,n=1,r){return(r=r||new ae(4))[0]=Math.min(n,Math.max(e,t[0])),r[1]=Math.min(n,Math.max(e,t[1])),r[2]=Math.min(n,Math.max(e,t[2])),r[3]=Math.min(n,Math.max(e,t[3])),r},add:function(t,e,n){return(n=n||new ae(4))[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n},addScaled:function(t,e,n,r){return(r=r||new ae(4))[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r[3]=t[3]+e[3]*n,r},subtract:le,sub:fe,equalsApproximately:function(t,e){return Math.abs(t[0]-e[0])<r&&Math.abs(t[1]-e[1])<r&&Math.abs(t[2]-e[2])<r&&Math.abs(t[3]-e[3])<r},equals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},lerp:function(t,e,n,r){return(r=r||new ae(4))[0]=t[0]+n*(e[0]-t[0]),r[1]=t[1]+n*(e[1]-t[1]),r[2]=t[2]+n*(e[2]-t[2]),r[3]=t[3]+n*(e[3]-t[3]),r},lerpV:function(t,e,n,r){return(r=r||new ae(4))[0]=t[0]+n[0]*(e[0]-t[0]),r[1]=t[1]+n[1]*(e[1]-t[1]),r[2]=t[2]+n[2]*(e[2]-t[2]),r[3]=t[3]+n[3]*(e[3]-t[3]),r},max:function(t,e,n){return(n=n||new ae(4))[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n[3]=Math.max(t[3],e[3]),n},min:function(t,e,n){return(n=n||new ae(4))[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.min(t[2],e[2]),n[3]=Math.min(t[3],e[3]),n},mulScalar:de,scale:he,divScalar:function(t,e,n){return(n=n||new ae(4))[0]=t[0]/e,n[1]=t[1]/e,n[2]=t[2]/e,n[3]=t[3]/e,n},inverse:me,invert:ve,dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},length:pe,len:ge,lengthSq:ye,lenSq:we,distance:be,dist:Me,distanceSq:xe,distSq:Oe,normalize:function(t,e){e=e||new ae(4);const n=t[0],r=t[1],o=t[2],i=t[3],a=Math.sqrt(n*n+r*r+o*o+i*i);return a>1e-5?(e[0]=n/a,e[1]=r/a,e[2]=o/a,e[3]=i/a):(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e},negate:function(t,e){return(e=e||new ae(4))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},copy:Se,clone:Ee,multiply:Te,mul:Be,divide:_e,div:De,zero:function(t){return(t=t||new ae(4))[0]=0,t[1]=0,t[2]=0,t[3]=0,t},transformMat4:function(t,e,n){n=n||new ae(4);const r=t[0],o=t[1],i=t[2],a=t[3];return n[0]=e[0]*r+e[4]*o+e[8]*i+e[12]*a,n[1]=e[1]*r+e[5]*o+e[9]*i+e[13]*a,n[2]=e[2]*r+e[6]*o+e[10]*i+e[14]*a,n[3]=e[3]*r+e[7]*o+e[11]*i+e[15]*a,n}});function Ie(t){C(t),yt(t),Rt(t),a(t),u(t),se(t)}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(752)})();