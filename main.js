(()=>{"use strict";var e={698:(e,t,n)=>{n.r(t)},687:(e,t,n)=>{n.r(t),n.d(t,{MotionValue:()=>i,ScrollOffset:()=>qe,animate:()=>Tt,animateStyle:()=>q,createAnimate:()=>ue,createMotionState:()=>xt,createStyleString:()=>Ot,createStyles:()=>wt,getAnimationData:()=>s,getStyleName:()=>N,glide:()=>Ve,inView:()=>Ae,mountedStates:()=>yt,resize:()=>Ne,scroll:()=>it,spring:()=>Ie,stagger:()=>ce,style:()=>j,timeline:()=>Ee,withControls:()=>Z});var r=function(){};class i{setAnimation(e){this.animation=e,null==e||e.finished.then((()=>this.clearAnimation())).catch((()=>{}))}clearAnimation(){this.animation=this.generator=void 0}}const o=new WeakMap;function s(e){return o.has(e)||o.set(e,{transforms:[],values:new Map}),o.get(e)}const a=()=>{},c=e=>e;function l(e,t){-1===e.indexOf(t)&&e.push(t)}function u(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const d=["","X","Y","Z"],f={x:"translateX",y:"translateY",z:"translateZ"},h={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>e+"deg"},m={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>e+"px"},rotate:h,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:c},skew:h},p=new Map,g=e=>`--motion-${e}`,v=["x","y","z"];["translate","scale","rotate","skew"].forEach((e=>{d.forEach((t=>{v.push(e+t),p.set(g(e+t),m[e])}))}));const y=(e,t)=>v.indexOf(e)-v.indexOf(t),x=new Set(v),w=e=>x.has(e),b=(e,t)=>{f[t]&&(t=f[t]);const{transforms:n}=s(e);l(n,t),e.style.transform=E(n)},E=e=>e.sort(y).reduce(O,"").trim(),O=(e,t)=>`${e} ${t}(var(${g(t)}))`,S=e=>e.startsWith("--"),B=new Set,T={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},M=e=>"object"==typeof e&&Boolean(e.createAnimation),D=e=>"function"==typeof e,z=e=>"number"==typeof e,P=e=>Array.isArray(e)&&!z(e[0]),I={ms:e=>1e3*e,s:e=>e/1e3},V=(e,t,n)=>t-e==0?1:(n-e)/(t-e),_=e=>Array.isArray(e)&&z(e[0]),A=(e,t)=>document.createElement("div").animate(e,t),C={cssRegisterProperty:()=>"undefined"!=typeof CSS&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{A({opacity:[1]})}catch(e){return!1}return!0},finished:()=>Boolean(A({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{A({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}},L={},U={};for(const e in C)U[e]=()=>(void 0===L[e]&&(L[e]=C[e]()),L[e]);const k=(e,t)=>D(e)?U.linearEasing()?`linear(${((e,t)=>{let n="";const r=Math.round(t/.015);for(let t=0;t<r;t++)n+=e(V(0,r-1,t))+", ";return n.substring(0,n.length-2)})(e,t)})`:T.easing:_(e)?R(e):e,R=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,F=e=>Array.isArray(e)?e:[e];function N(e){return f[e]&&(e=f[e]),w(e)?g(e):e}const j={get:(e,t)=>{t=N(t);let n=S(t)?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!n&&0!==n){const e=p.get(t);e&&(n=e.initialValue)}return n},set:(e,t,n)=>{t=N(t),S(t)?e.style.setProperty(t,n):e.style[t]=n}};function W(e,t=!0){if(e&&"finished"!==e.playState)try{e.stop?e.stop():(t&&e.commitStyles(),e.cancel())}catch(e){}}const $=e=>"string"==typeof e;function G(e,t){var n;let r=(null==t?void 0:t.toDefaultUnit)||c;const i=e[e.length-1];if($(i)){const e=(null===(n=i.match(/(-?[\d.]+)([a-z%]*)/))||void 0===n?void 0:n[2])||"";e&&(r=t=>t+e)}return r}function q(e,t,n,r={},o){const c=window.__MOTION_DEV_TOOLS_RECORD,l=!1!==r.record&&c;let u,{duration:d=T.duration,delay:f=T.delay,endDelay:h=T.endDelay,repeat:m=T.repeat,easing:g=T.easing,persist:v=!1,direction:y,offset:x,allowWebkitAcceleration:E=!1}=r;const O=s(e),V=w(t);let _=U.waapi();V&&b(e,t);const A=N(t),C=function(e,t){return e.has(t)||e.set(t,new i),e.get(t)}(O.values,A),L=p.get(A);return W(C.animation,!(M(g)&&C.generator)&&!1!==r.record),()=>{const i=()=>{var t,n;return null!==(n=null!==(t=j.get(e,A))&&void 0!==t?t:null==L?void 0:L.initialValue)&&void 0!==n?n:0};let s=function(e,t){for(let n=0;n<e.length;n++)null===e[n]&&(e[n]=n?e[n-1]:t());return e}(F(n),i);const w=G(s,L);if(M(g)){const e=g.createAnimation(s,"opacity"!==t,i,A,C);g=e.easing,s=e.keyframes||s,d=e.duration||d}if(S(A)&&(U.cssRegisterProperty()?function(e){if(!B.has(e)){B.add(e);try{const{syntax:t,initialValue:n}=p.has(e)?p.get(e):{};CSS.registerProperty({name:e,inherits:!1,syntax:t,initialValue:n})}catch(e){}}}(A):_=!1),V&&!U.linearEasing()&&(D(g)||P(g)&&g.some(D))&&(_=!1),_){L&&(s=s.map((e=>z(e)?L.toDefaultUnit(e):e))),1!==s.length||U.partialKeyframes()&&!l||s.unshift(i());const t={delay:I.ms(f),duration:I.ms(d),endDelay:I.ms(h),easing:P(g)?void 0:k(g,d),direction:y,iterations:m+1,fill:"both"};u=e.animate({[A]:s,offset:x,easing:P(g)?g.map((e=>k(e,d))):void 0},t),u.finished||(u.finished=new Promise(((e,t)=>{u.onfinish=e,u.oncancel=t})));const n=s[s.length-1];u.finished.then((()=>{v||(j.set(e,A,n),u.cancel())})).catch(a),E||(u.playbackRate=1.000001)}else if(o&&V)s=s.map((e=>"string"==typeof e?parseFloat(e):e)),1===s.length&&s.unshift(parseFloat(i())),u=new o((t=>{j.set(e,A,w?w(t):t)}),s,Object.assign(Object.assign({},r),{duration:d,easing:g}));else{const t=s[s.length-1];j.set(e,A,L&&z(t)?L.toDefaultUnit(t):t)}return l&&c(e,t,s,{duration:d,delay:f,easing:g,repeat:m,offset:x},"motion-one"),C.setAnimation(u),u}}const H=(e,t)=>e[t]?Object.assign(Object.assign({},e),e[t]):Object.assign({},e);function X(e,t){var n;return"string"==typeof e?t?(null!==(n=t[e])&&void 0!==n||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}const Y=e=>e(),Z=(e,t,n=T.duration)=>new Proxy({animations:e.map(Y).filter(Boolean),duration:n,options:t},K),K={get:(e,t)=>{const n=e.animations[0];switch(t){case"duration":return e.duration;case"currentTime":return I.s((null==n?void 0:n[t])||0);case"playbackRate":case"playState":return null==n?void 0:n[t];case"finished":return e.finished||(e.finished=Promise.all(e.animations.map(J)).catch(a)),e.finished;case"stop":return()=>{e.animations.forEach((e=>W(e)))};case"forEachNative":return t=>{e.animations.forEach((n=>t(n,e)))};default:return void 0===(null==n?void 0:n[t])?void 0:()=>e.animations.forEach((e=>e[t]()))}},set:(e,t,n)=>{switch(t){case"currentTime":n=I.ms(n);case"playbackRate":for(let r=0;r<e.animations.length;r++)e.animations[r][t]=n;return!0}return!1}},J=e=>e.finished,Q=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,ee=1e-7,te=12;function ne(e,t,n,r){if(e===t&&n===r)return c;return i=>0===i||1===i?i:Q(function(e,t,n,r,i){let o,s,a=0;do{s=t+(n-t)/2,o=Q(s,r,i)-e,o>0?n=s:t=s}while(Math.abs(o)>ee&&++a<te);return s}(i,0,1,e,n),t,r)}const re=(e,t,n)=>Math.min(Math.max(n,e),t),ie=(e,t="end")=>n=>{const r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e,i="end"===t?Math.floor(r):Math.ceil(r);return re(0,1,i/e)},oe={ease:ne(.25,.1,.25,1),"ease-in":ne(.42,0,1,1),"ease-in-out":ne(.42,0,.58,1),"ease-out":ne(0,0,.58,1)},se=/\((.*?)\)/;function ae(e){if(D(e))return e;if(_(e))return ne(...e);if(oe[e])return oe[e];if(e.startsWith("steps")){const t=se.exec(e);if(t){const e=t[1].split(",");return ie(parseFloat(e[0]),e[1].trim())}}return c}function ce(e=.1,{start:t=0,from:n=0,easing:r}={}){return(i,o)=>{const s=z(n)?n:function(e,t){if("first"===e)return 0;{const n=t-1;return"last"===e?n:n/2}}(n,o),a=Math.abs(s-i);let c=e*a;if(r){const t=o*e;c=ae(r)(c/t)*t}return t+c}}function le(e,t,n){return D(e)?e(t,n):e}function ue(e){return function(t,n,i={}){const o=(t=X(t)).length;r(Boolean(o),"No valid element provided."),r(Boolean(n),"No keyframes defined.");const s=[];for(let r=0;r<o;r++){const a=t[r];for(const t in n){const c=H(i,t);c.delay=le(c.delay,r,o);const l=q(a,t,n[t],c,e);s.push(l)}}return Z(s,i,i.duration)}}function de(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create,Object.create;const fe=(e,t,n)=>-n*e+n*t+e;function he(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=V(0,t,r);e.push(fe(n,1,i))}}function me(e){const t=[0];return he(t,e-1),t}function pe(e,t,n,r){var i;return z(t)?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):"<"===t?n:null!==(i=r.get(t))&&void 0!==i?i:e}const ge=(e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e};function ve(e,t){return P(e)?e[ge(0,e.length,t)]:e}function ye(e,t,n,r,i,o){!function(e,t,n){for(let r=0;r<e.length;r++){const i=e[r];i.at>t&&i.at<n&&(u(e,i),r--)}}(e,i,o);for(let s=0;s<t.length;s++)e.push({value:t[s],at:fe(i,o,r[s]),easing:ve(n,s)})}function xe(e,t){return e.at===t.at?null===e.value?1:-1:e.at-t.at}function we(e,t=me(e.length),n=c){const r=e.length,i=r-t.length;return i>0&&he(t,i),i=>{let o=0;for(;o<r-2&&!(i<t[o+1]);o++);let s=re(0,1,V(t[o],t[o+1],i));return s=ve(n,o)(s),fe(e[o],e[o+1],s)}}class be{constructor(e,t=[0,1],{easing:n,duration:r=T.duration,delay:i=T.delay,endDelay:o=T.endDelay,repeat:s=T.repeat,offset:a,direction:l="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=c,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),n=n||T.easing,M(n)){const e=n.createAnimation(t);n=e.easing,t=e.keyframes||t,r=e.duration||r}this.repeat=s,this.easing=P(n)?c:ae(n),this.updateDuration(r);const u=we(t,a,P(n)?n.map(ae):c);this.tick=t=>{var n;let r=0;r=void 0!==this.pauseTime?this.pauseTime:(t-this.startTime)*this.rate,this.t=r,r/=1e3,r=Math.max(r-i,0),"finished"===this.playState&&void 0===this.pauseTime&&(r=this.totalDuration);const s=r/this.duration;let a=Math.floor(s),c=s%1;!c&&s>=1&&(c=1),1===c&&a--;const d=a%2;("reverse"===l||"alternate"===l&&d||"alternate-reverse"===l&&!d)&&(c=1-c);const f=r>=this.totalDuration?1:Math.min(c,1),h=u(this.easing(f));e(h),void 0===this.pauseTime&&("finished"===this.playState||r>=this.totalDuration+o)?(this.playState="finished",null===(n=this.resolve)||void 0===n||n.call(this,h)):"idle"!==this.playState&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const e=performance.now();this.playState="running",void 0!==this.pauseTime?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",void 0!==this.frameRequestId&&cancelAnimationFrame(this.frameRequestId),null===(e=this.reject)||void 0===e||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){void 0!==this.pauseTime||0===this.rate?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}function Ee(e,t={}){var n;const i=function(e,t={}){var{defaultOptions:n={}}=t,i=de(t,["defaultOptions"]);const o=[],s=new Map,a={},c=new Map;let l=0,u=0,d=0;for(let t=0;t<e.length;t++){const i=e[t];if($(i)){c.set(i,u);continue}if(!Array.isArray(i)){c.set(i.name,pe(u,i.at,l,c));continue}const[o,m,p={}]=i;void 0!==p.at&&(u=pe(u,p.at,l,c));let g=0;const v=X(o,a),y=v.length;for(let e=0;e<y;e++){const t=(f=v[e],!(h=s).has(f)&&h.set(f,{}),h.get(f));for(const i in m){const o=Oe(i,t);let s=F(m[i]);const a=H(p,i);let{duration:c=n.duration||T.duration,easing:l=n.easing||T.easing}=a;if(M(l)){r("opacity"===i||s.length>1,"spring must be provided 2 keyframes within timeline()");const e=l.createAnimation(s,"opacity"!==i,(()=>0),i);l=e.easing,s=e.keyframes||s,c=e.duration||c}const f=le(p.delay,e,y)||0,h=u+f,v=h+c;let{offset:x=me(s.length)}=a;1===x.length&&0===x[0]&&(x[1]=1);const w=x.length-s.length;w>0&&he(x,w),1===s.length&&s.unshift(null),ye(o,s,l,x,h,v),g=Math.max(f+c,g),d=Math.max(v,d)}}l=u,u+=g}var f,h;return s.forEach(((e,t)=>{for(const r in e){const s=e[r];s.sort(xe);const a=[],c=[],l=[];for(let e=0;e<s.length;e++){const{at:t,value:n,easing:r}=s[e];a.push(n),c.push(V(0,d,t)),l.push(r||T.easing)}0!==c[0]&&(c.unshift(0),a.unshift(a[0]),l.unshift("linear")),1!==c[c.length-1]&&(c.push(1),a.push(null)),o.push([t,r,a,Object.assign(Object.assign(Object.assign({},n),{duration:d,easing:l,offset:c}),i)])}})),o}(e,t),o=i.map((e=>q(...e,be))).filter(Boolean);return Z(o,t,null===(n=i[0])||void 0===n?void 0:n[3].duration)}function Oe(e,t){return t[e]||(t[e]=[]),t[e]}function Se(e,t){return t?e*(1e3/t):0}const Be=5;function Te(e,t,n){const r=Math.max(t-Be,0);return Se(n-e(r),t-r)}const Me=({stiffness:e=100,damping:t=10,mass:n=1,from:r=0,to:i=1,velocity:o=0,restSpeed:s,restDistance:a}={})=>{o=o?I.s(o):0;const c={done:!1,hasReachedTarget:!1,current:r,target:i},l=i-r,u=Math.sqrt(e/n)/1e3,d=((e=100,t=10,n=1)=>t/(2*Math.sqrt(e*n)))(e,t,n),f=Math.abs(l)<5;let h;if(s||(s=f?.01:2),a||(a=f?.005:.5),d<1){const e=u*Math.sqrt(1-d*d);h=t=>i-Math.exp(-d*u*t)*((d*u*l-o)/e*Math.sin(e*t)+l*Math.cos(e*t))}else h=e=>i-Math.exp(-u*e)*(l+(u*l-o)*e);return e=>{c.current=h(e);const t=0===e?o:Te(h,e,c.current),n=Math.abs(t)<=s,l=Math.abs(i-c.current)<=a;var u,d,f;return c.done=n&&l,c.hasReachedTarget=(u=r,d=i,f=c.current,u<d&&f>=d||u>d&&f<=d),c}};function De(e){return z(e)&&!isNaN(e)}function ze(e){return $(e)?parseFloat(e):e}function Pe(e){const t=new WeakMap;return(n={})=>{const r=new Map,i=(t=0,i=100,o=0,s=!1)=>{const a=`${t}-${i}-${o}-${s}`;return r.has(a)||r.set(a,e(Object.assign({from:t,to:i,velocity:o},n))),r.get(a)},o=(e,n)=>(t.has(e)||t.set(e,function(e,t=c){let n,r=10,i=e(0);const o=[t(i.current)];for(;!i.done&&r<1e4;)i=e(r),o.push(t(i.done?i.target:i.current)),void 0===n&&i.hasReachedTarget&&(n=r),r+=10;const s=r-10;return 1===o.length&&o.push(i.current),{keyframes:o,duration:s/1e3,overshootDuration:(null!=n?n:s)/1e3}}(e,n)),t.get(e));return{createAnimation:(e,t=!0,n,r,s)=>{let a,l,u,d=0,f=c;const h=e.length;if(t)if(f=G(e,r?p.get(N(r)):void 0),u=ze(e[h-1]),h>1&&null!==e[0])l=ze(e[0]);else{const e=null==s?void 0:s.generator;if(e){const{animation:t,generatorStartTime:n}=s,r=(null==t?void 0:t.startTime)||n||0,i=(null==t?void 0:t.currentTime)||performance.now()-r,o=e(i).current;l=o,d=Te((t=>e(t).current),i,o)}else n&&(l=ze(n()))}if(De(l)&&De(u)){const e=i(l,u,d,null==r?void 0:r.includes("scale"));a=Object.assign(Object.assign({},o(e,f)),{easing:"linear"}),s&&(s.generator=e,s.generatorStartTime=performance.now())}return a||(a={easing:"ease",duration:o(i(0,100)).overshootDuration}),a}}}}const Ie=Pe(Me),Ve=Pe((({from:e=0,velocity:t=0,power:n=.8,decay:r=.325,bounceDamping:i,bounceStiffness:o,changeTarget:s,min:a,max:c,restDistance:l=.5,restSpeed:u})=>{r=I.ms(r);const d={hasReachedTarget:!1,done:!1,current:e,target:e},f=e=>void 0===a?c:void 0===c||Math.abs(a-e)<Math.abs(c-e)?a:c;let h=n*t;const m=e+h,p=void 0===s?m:s(m);d.target=p,p!==m&&(h=p-e);const g=e=>-h*Math.exp(-e/r),v=e=>p+g(e),y=e=>{const t=g(e),n=v(e);d.done=Math.abs(t)<=l,d.current=d.done?p:n};let x,w;const b=e=>{var t;t=d.current,(void 0!==a&&t<a||void 0!==c&&t>c)&&(x=e,w=Me({from:d.current,to:f(d.current),velocity:Te(v,e,d.current),damping:i,stiffness:o,restDistance:l,restSpeed:u}))};return b(0),e=>{let t=!1;return w||void 0!==x||(t=!0,y(e),b(e)),void 0!==x&&e>x?(d.hasReachedTarget=!0,w(e-x)):(d.hasReachedTarget=!1,!t&&y(e),d)}})),_e={any:0,all:1};function Ae(e,t,{root:n,margin:r,amount:i="any"}={}){if("undefined"==typeof IntersectionObserver)return()=>{};const o=X(e),s=new WeakMap,a=new IntersectionObserver((e=>{e.forEach((e=>{const n=s.get(e.target);if(e.isIntersecting!==Boolean(n))if(e.isIntersecting){const n=t(e);D(n)?s.set(e.target,n):a.unobserve(e.target)}else n&&(n(e),s.delete(e.target))}))}),{root:n,rootMargin:r,threshold:"number"==typeof i?i:_e[i]});return o.forEach((e=>a.observe(e))),()=>a.disconnect()}const Ce=new WeakMap;let Le;function Ue({target:e,contentRect:t,borderBoxSize:n}){var r;null===(r=Ce.get(e))||void 0===r||r.forEach((r=>{r({target:e,contentSize:t,get size(){return function(e,t){if(t){const{inlineSize:e,blockSize:n}=t[0];return{width:e,height:n}}return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}(e,n)}})}))}function ke(e){e.forEach(Ue)}const Re=new Set;let Fe;function Ne(e,t){return D(e)?(n=e,Re.add(n),Fe||(Fe=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};Re.forEach((e=>e(t)))},window.addEventListener("resize",Fe)),()=>{Re.delete(n),!Re.size&&Fe&&(Fe=void 0)}):function(e,t){Le||"undefined"!=typeof ResizeObserver&&(Le=new ResizeObserver(ke));const n=X(e);return n.forEach((e=>{let n=Ce.get(e);n||(n=new Set,Ce.set(e,n)),n.add(t),null==Le||Le.observe(e)})),()=>{n.forEach((e=>{const n=Ce.get(e);null==n||n.delete(t),(null==n?void 0:n.size)||null==Le||Le.unobserve(e)}))}}(e,t);var n}const je=50,We=()=>({time:0,x:{current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0},y:{current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}}),$e={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function Ge(e,t,n,r){const i=n[t],{length:o,position:s}=$e[t],a=i.current,c=n.time;i.current=e["scroll"+s],i.scrollLength=e["scroll"+o]-e["client"+o],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=V(0,i.scrollLength,i.current);const l=r-c;i.velocity=l>je?0:Se(i.current-a,l)}const qe={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},He={start:0,center:.5,end:1};function Xe(e,t,n=0){let r=0;if(void 0!==He[e]&&(e=He[e]),$(e)){const t=parseFloat(e);e.endsWith("px")?r=t:e.endsWith("%")?e=t/100:e.endsWith("vw")?r=t/100*document.documentElement.clientWidth:e.endsWith("vh")?r=t/100*document.documentElement.clientHeight:e=t}return z(e)&&(r=t*e),n+r}const Ye=[0,0];function Ze(e,t,n,r){let i=Array.isArray(e)?e:Ye,o=0,s=0;return z(e)?i=[e,e]:$(e)&&(i=(e=e.trim()).includes(" ")?e.split(" "):[e,He[e]?e:"0"]),o=Xe(i[0],n,r),s=Xe(i[1],t),o-s}const Ke={x:0,y:0};function Je(e,t,n,r={}){const i=r.axis||"y";return{measure:()=>function(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let r=t;for(;r&&r!=e;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}(e,r.target,n),update:t=>{!function(e,t,n){Ge(e,"x",t,n),Ge(e,"y",t,n),t.time=n}(e,n,t),(r.offset||r.target)&&function(e,t,n){let{offset:r=qe.All}=n;const{target:i=e,axis:o="y"}=n,s="y"===o?"height":"width",a=i!==e?function(e,t){let n={x:0,y:0},r=e;for(;r&&r!==t;)if(r instanceof HTMLElement)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if(r instanceof SVGGraphicsElement&&"getBBox"in r){const{top:e,left:t}=r.getBBox();for(n.x+=t,n.y+=e;r&&"svg"!==r.tagName;)r=r.parentNode}return n}(i,e):Ke,c=i===e?{width:e.scrollWidth,height:e.scrollHeight}:{width:i.clientWidth,height:i.clientHeight},l={width:e.clientWidth,height:e.clientHeight};t[o].offset.length=0;let u=!t[o].interpolate;const d=r.length;for(let e=0;e<d;e++){const n=Ze(r[e],l[s],c[s],a[o]);u||n===t[o].interpolatorOffsets[e]||(u=!0),t[o].offset[e]=n}u&&(t[o].interpolate=we(me(d),t[o].offset),t[o].interpolatorOffsets=[...t[o].offset]),t[o].progress=t[o].interpolate(t[o].current)}(e,n,r)},notify:D(t)?()=>t(n):Qe(t,n[i])}}function Qe(e,t){return e.pause(),e.forEachNative(((e,{easing:t})=>{var n,r;if(e.updateDuration)t||(e.easing=c),e.updateDuration(1);else{const i={duration:1e3};t||(i.easing="linear"),null===(r=null===(n=e.effect)||void 0===n?void 0:n.updateTiming)||void 0===r||r.call(n,i)}})),()=>{e.currentTime=t.progress}}const et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=e=>e===document.documentElement?window:e;function it(e,t={}){var{container:n=document.documentElement}=t,r=de(t,["container"]);let i=nt.get(n);i||(i=new Set,nt.set(n,i));const o=We(),s=Je(n,e,o,r);if(i.add(s),!et.has(n)){const e=()=>{const e=performance.now();for(const e of i)e.measure();for(const t of i)t.update(e);for(const e of i)e.notify()};et.set(n,e);const t=rt(n);window.addEventListener("resize",e,{passive:!0}),n!==document.documentElement&&tt.set(n,Ne(n,e)),t.addEventListener("scroll",e,{passive:!0})}const a=et.get(n),c=requestAnimationFrame(a);return()=>{var t;"function"!=typeof e&&e.stop(),cancelAnimationFrame(c);const r=nt.get(n);if(!r)return;if(r.delete(s),r.size)return;const i=et.get(n);et.delete(n),i&&(rt(n).removeEventListener("scroll",i),null===(t=tt.get(n))||void 0===t||t(),window.removeEventListener("resize",i))}}function ot(e,t){return function(e){return"object"==typeof e}(e)?e:e&&t?t[e]:void 0}let st;function at(){if(!st)return;const e=st.sort(lt).map(ut);e.forEach(dt),e.forEach(dt),st=void 0}function ct(e){st?l(st,e):(st=[e],requestAnimationFrame(at))}const lt=(e,t)=>e.getDepth()-t.getDepth(),ut=e=>e.animateUpdates(),dt=e=>e.next(),ft=(e,t)=>new CustomEvent(e,{detail:{target:t}});function ht(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:{originalEvent:n}}))}function mt(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:{originalEntry:n}}))}const pt=(e,t,n)=>r=>{r.pointerType&&"mouse"!==r.pointerType||(n(),ht(e,t,r))},gt={inView:{isActive:e=>Boolean(e.inView),subscribe:(e,{enable:t,disable:n},{inViewOptions:r={}})=>{const{once:i}=r,o=de(r,["once"]);return Ae(e,(r=>{if(t(),mt(e,"viewenter",r),!i)return t=>{n(),mt(e,"viewleave",t)}}),o)}},hover:{isActive:e=>Boolean(e.hover),subscribe:(e,{enable:t,disable:n})=>{const r=pt(e,"hoverstart",t),i=pt(e,"hoverend",n);return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",i),()=>{e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",i)}}},press:{isActive:e=>Boolean(e.press),subscribe:(e,{enable:t,disable:n})=>{const r=t=>{n(),ht(e,"pressend",t),window.removeEventListener("pointerup",r)},i=n=>{t(),ht(e,"pressstart",n),window.addEventListener("pointerup",r)};return e.addEventListener("pointerdown",i),()=>{e.removeEventListener("pointerdown",i),window.removeEventListener("pointerup",r)}}}},vt=["initial","animate",...Object.keys(gt),"exit"],yt=new WeakMap;function xt(e={},t){let n,i=t?t.getDepth()+1:0;const o={initial:!0,animate:!0},s={},c={};for(const n of vt)c[n]="string"==typeof e[n]?e[n]:null==t?void 0:t.getContext()[n];const l=!1===e.initial?"animate":"initial";let d=de(ot(e[l]||c[l],e.variants)||{},["transition"]);const f=Object.assign({},d),h=(e,t)=>()=>{o[e]=t,ct(p)},m=()=>{for(const t in gt){const r=gt[t].isActive(e),i=s[t];r&&!i?s[t]=gt[t].subscribe(n,{enable:h(t,!0),disable:h(t,!1)},e):!r&&i&&(i(),delete s[t])}},p={update:t=>{n&&(e=t,m(),ct(p))},setActive:(e,t)=>{n&&(o[e]=t,ct(p))},animateUpdates:function*(){var t,r;const i=d;d={};const s={};for(const n of vt){if(!o[n])continue;const i=ot(e[n]);if(i)for(const n in i)"transition"!==n&&(d[n]=i[n],s[n]=H(null!==(r=null!==(t=i.transition)&&void 0!==t?t:e.transition)&&void 0!==r?r:{},n))}const c=new Set([...Object.keys(d),...Object.keys(i)]),l=[];c.forEach((e=>{var t,r,o;void 0===d[e]&&(d[e]=f[e]),typeof(r=i[e])==typeof(o=d[e])&&(Array.isArray(r)&&Array.isArray(o)?function(e,t){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}(r,o):r===o)||(null!==(t=f[e])&&void 0!==t||(f[e]=j.get(n,e)),l.push(q(n,e,d[e],s[e],be)))})),yield;const u=l.map((e=>e())).filter(Boolean);if(!u.length)return;const h=d;n.dispatchEvent(ft("motionstart",h)),Promise.all(u.map((e=>e.finished))).then((()=>{n.dispatchEvent(ft("motioncomplete",h))})).catch(a)},getDepth:()=>i,getTarget:()=>d,getOptions:()=>e,getContext:()=>c,mount:e=>(r(Boolean(e),"Animation state must be mounted with valid Element"),n=e,yt.set(n,p),m(),()=>{yt.delete(n),function(e){st&&u(st,e)}(p);for(const e in s)s[e]()}),isMounted:()=>Boolean(n)};return p}function wt(e){const t={},n=[];for(let r in e){const i=e[r];w(r)&&(f[r]&&(r=f[r]),n.push(r),r=g(r));let o=Array.isArray(i)?i[0]:i;const s=p.get(r);s&&(o=z(i)?s.toDefaultUnit(i):i),t[r]=o}return n.length&&(t.transform=E(n)),t}const bt=e=>`-${e.toLowerCase()}`,Et=e=>e.replace(/[A-Z]/g,bt);function Ot(e={}){const t=wt(e);let n="";for(const e in t)n+=e.startsWith("--")?e:Et(e),n+=`: ${t[e]}; `;return n}const St=ue(be);function Bt(e,t={}){return Z([()=>{const n=new be(e,[0,1],t);return n.finished.catch((()=>{})),n}],t,t.duration)}function Tt(e,t,n){return(D(e)?Bt:St)(e,t,n)}},752:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.camera=t.deltaTime=t.elapsedTime=t.translateX=t.scale=t.resolution=t.canvas=t.gpuContext=t.device=void 0;const i=r(n(144)),o=n(351),s=n(768),a=n(608),c=n(830),l=n(562),u=n(413);n(698);const d=n(687);t.resolution=new o.Vector2(0,0);let f=1;t.scale=1,t.translateX=0;const h=performance.now();t.elapsedTime=h,t.deltaTime=0,t.camera=new c.Camera({fieldOfView:82.5,position:new u.Vector3(120,120,120),direction:new u.Vector3(-1,-1,-1).normalize()});const m=new l.DebugUI;let p,g;window.addEventListener("changefov",(e=>{t.camera.fieldOfView=e.detail})),window.addEventListener("changetranslate",(e=>{const n=e.detail,r=t.translateX;g=(0,d.animate)((e=>{t.translateX=r+(n-r)*e}),{easing:(0,d.spring)({restDistance:.001})})})),window.addEventListener("changescale",(e=>{t.scale=parseFloat(e.detail)}));void 0!==navigator.gpu?navigator.gpu.requestAdapter().then((e=>{e.requestDevice().then((e=>{t.device=e;const n=(0,a.createComputePass)();((e,n)=>{let r,a,l,u,d,g,v;t.canvas=document.getElementById("webgpu-canvas"),t.canvas.addEventListener("click",(async()=>{t.canvas.requestPointerLock()})),document.addEventListener("pointerlockchange",(()=>{g=null!==document.pointerLockElement})),t.gpuContext=t.canvas.getContext("webgpu");const y=navigator.gpu.getPreferredCanvasFormat();t.gpuContext.configure({device:e,format:y,usage:GPUTextureUsage.RENDER_ATTACHMENT});const x=e.createShaderModule({code:i.default}),w=e.createRenderPipeline({layout:"auto",vertex:{module:x,entryPoint:"vertex_main"},fragment:{module:x,entryPoint:"fragment_main",targets:[{format:y}]}}),b=()=>{cancelAnimationFrame(l),E()},E=()=>{const{clientWidth:e,clientHeight:r}=t.canvas.parentElement;t.resolution=new o.Vector2(e*window.devicePixelRatio,r*window.devicePixelRatio),v=t.resolution.mul(1/f),t.canvas.width=t.resolution.x,t.canvas.height=t.resolution.y,t.canvas.style.transform=`scale(${1/window.devicePixelRatio})`,n.forEach((e=>{e.start()})),l=requestAnimationFrame(O)},O=async()=>{const i=performance.now()-h;t.deltaTime=i-t.elapsedTime,t.elapsedTime=i,g&&(0,c.moveCamera)(),t.camera.update(),m.log(`Position: ${t.camera.position.toString()}\n    Resolution: ${v.x.toFixed(0)}x${v.y.toFixed(0)}\n    FPS: ${(1e3/t.deltaTime).toFixed(1)}\n    `);const o=e.createCommandEncoder();u?(0,s.writeToUniformBuffer)(u,[t.elapsedTime]):u=(0,s.createUniformBuffer)([t.elapsedTime]),d?(0,s.writeToUniformBuffer)(d,[v.x,v.y]):d=(0,s.createUniformBuffer)([v.x,v.y]);const f=(a&&a.destroy(),a=e.createTexture({size:[v.x,v.y,1],format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.STORAGE_BINDING}),a.createView());n.forEach((e=>{e.render({commandEncoder:o,timeBuffer:u,resolutionBuffer:d,outputTextureView:f})})),(({commandEncoder:n,outputTextureView:i})=>{const o=n.beginRenderPass({colorAttachments:[{view:t.gpuContext.getCurrentTexture().createView(),loadOp:"clear",clearValue:[.3,.3,.3,1],storeOp:"store"}]});r=e.createBindGroup({layout:w.getBindGroupLayout(0),entries:[{binding:0,resource:e.createSampler({magFilter:"linear",minFilter:"linear"})},{binding:1,resource:i}]}),o.setPipeline(w),o.setBindGroup(0,r),o.draw(6),o.end()})({commandEncoder:o,outputTextureView:f}),e.queue.submit([o.finish()]),l=requestAnimationFrame(O)},S=new ResizeObserver(b);p=e=>{f=e.detail,b()},window.addEventListener("changedownscale",p),S.observe(t.canvas.parentElement)})(t.device,[n])}))})):console.error("WebGPU not supported")},768:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createFloatUniformBuffer=t.writeToFloatUniformBuffer=t.createUniformBuffer=t.writeToUniformBuffer=void 0;const r=n(752);t.writeToUniformBuffer=(e,t)=>{const n=new Uint32Array(t);r.device.queue.writeBuffer(e,0,n.buffer,0,t.length*Uint32Array.BYTES_PER_ELEMENT)},t.createUniformBuffer=(e,n)=>{const i=new Uint32Array(e),o=r.device.createBuffer({size:i.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,label:n});return(0,t.writeToUniformBuffer)(o,e),o},t.writeToFloatUniformBuffer=(e,t)=>{const n=new Float32Array(t);r.device.queue.writeBuffer(e,0,n.buffer,0,t.length*Float32Array.BYTES_PER_ELEMENT)},t.createFloatUniformBuffer=(e,n)=>{const i=new Float32Array(e),o=r.device.createBuffer({size:i.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,label:n});return(0,t.writeToFloatUniformBuffer)(o,e),o}},830:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveCamera=t.Camera=void 0;const r=n(413),i=n(752),o=n(718),s=n(189),a=n(224),c=new o.KeyboardControls,l=new s.MouseControls;class u extends a.MoveableObject{fieldOfView;direction;constructor(e){super({position:e.position}),this.fieldOfView=e.fieldOfView,this.direction=e.direction}reset(e){this.position=new r.Vector3(16,16,-16),this.targetPosition=this.position,this.fieldOfView=e.fieldOfView,this.direction=new r.Vector3(0,0,1)}get right(){return r.Vector3.up.cross(this.direction).normalize()}get left(){return this.direction.cross(r.Vector3.up).normalize()}get up(){return this.direction.cross(this.right).normalize()}get down(){return this.up.negate()}rotateX(e){this.direction=this.direction.rotateAroundAxis(this.right,e)}rotateY(e){this.direction=this.direction.rotateAroundAxis(r.Vector3.up,e)}}t.Camera=u,t.moveCamera=()=>{if(i.camera.rotateY(.001*l.velocity.x),i.camera.rotateX(.001*l.velocity.y),!document.hasFocus())return;let e=r.Vector3.zero;c.pressed.a&&(e=e.add(i.camera.left)),c.pressed.d&&(e=e.add(i.camera.right)),c.pressed.w&&(e=e.add(i.camera.direction)),c.pressed.s&&(e=e.subtract(i.camera.direction)),c.pressed[" "]&&(e=e.add(i.camera.up)),c.pressed.Control&&(e=e.add(i.camera.down)),e=e.normalize(),i.camera.velocity=i.camera.velocity.add(e.mul(.01))}},608:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createComputePass=void 0;const i=r(n(110)),o=r(n(693)),s=n(413),a=n(768),c=n(752),l=n(15);t.createComputePass=()=>{let e;return{start:()=>{e=c.device.createComputePipeline({layout:"auto",compute:{module:c.device.createShaderModule({code:`\n          ${o.default}${i.default}`}),entryPoint:"main"}})},render:({commandEncoder:t,timeBuffer:n,resolutionBuffer:r,outputTextureView:i})=>{const o=(e=>{const t=c.resolution.x/c.resolution.y,n=e.fieldOfView/2,r=Math.tan(n),i=s.Vector3.up.cross(e.direction).normalize(),o=e.direction.cross(i).normalize().mul(r);return[e.direction.add(o).add(i.mul(-t*r)),e.direction.add(o).add(i.mul(t*r)),e.direction.subtract(o).add(i.mul(-t*r)),e.direction.subtract(o).add(i.mul(t*r))]})(c.camera).flatMap((e=>[...e.toArray(),0])),u=(0,a.createFloatUniformBuffer)(o,"frustum corner directions"),d=(0,a.createFloatUniformBuffer)(c.camera.position.toArray(),"camera position"),f=l.Matrix4x4.identity;f.scale(s.Vector3.one.mul(c.scale)),f.translate(new s.Vector3(c.translateX,0,0));const h=(0,a.createFloatUniformBuffer)(f.elements,"transformation matrix"),m=t.beginComputePass();m.setPipeline(e);const p=c.device.createBindGroup({layout:e.getBindGroupLayout(0),entries:[{binding:0,resource:i},{binding:2,resource:{buffer:r}},{binding:3,resource:{buffer:u}},{binding:4,resource:{buffer:d}},{binding:5,resource:{buffer:h}}]});m.setBindGroup(0,p),m.dispatchWorkgroups(Math.ceil(c.resolution.x/8),Math.ceil(c.resolution.y/8)),m.end()}}}},718:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardControls=void 0,t.KeyboardControls=class{pressed={w:!1,a:!1,s:!1,d:!1," ":!1,Control:!1};constructor(){window.addEventListener("keydown",(e=>{const t=e.key.toLowerCase();this.pressed[t]=!0})),window.addEventListener("keyup",(e=>{const t=e.key.toLowerCase();this.pressed[t]=!1}))}}},15:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix4x4=void 0;class n{elements;static get identity(){const e=new n;return e.elements[0]=1,e.elements[5]=1,e.elements[10]=1,e.elements[15]=1,e}constructor(){this.elements=new Array(16).fill(0)}set(e,t,n){this.elements[4*e+t]=n}get(e,t){return this.elements[4*e+t]}multiply(e){const t=new n;for(let n=0;n<4;n++)for(let r=0;r<4;r++){let i=0;for(let t=0;t<4;t++)i+=this.get(n,t)*e.get(t,r);t.set(n,r,i)}this.elements=t.elements}translate(e){this.set(3,0,e.x),this.set(3,1,e.y),this.set(3,2,e.z)}scale(e){this.set(0,0,e.x),this.set(1,1,e.y),this.set(2,2,e.z)}}t.Matrix4x4=n},189:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MouseControls=void 0;const r=n(351);t.MouseControls=class{velocity=r.Vector2.zero;animationFrame;constructor(){window.addEventListener("mousemove",(e=>{cancelAnimationFrame(this.animationFrame),this.velocity=new r.Vector2(e.movementX,e.movementY),this.animationFrame=requestAnimationFrame((()=>{this.velocity=r.Vector2.zero}))}))}}},224:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MoveableObject=void 0;const r=n(413),i=n(752);t.MoveableObject=class{position;targetPosition;velocity;constructor(e){this.position=e.position,this.targetPosition=this.position,this.velocity=r.Vector3.zero}update(){i.camera.velocity=i.camera.velocity.mul(1-.015*i.deltaTime),this.position=this.position.add(this.velocity.mul(i.deltaTime))}}},562:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebugUI=void 0;const r=n(752);t.DebugUI=class{logElement;constructor(){document.getElementById("reset").addEventListener("click",(e=>{r.camera.reset({fieldOfView:90}),document.getElementById("captures").innerHTML=""})),document.getElementById("capture").addEventListener("click",(e=>{const t=new Image;t.id=performance.now().toString(),t.src=r.canvas.toDataURL(),document.getElementById("captures").appendChild(t).addEventListener("click",(e=>{e.target,console.log(e.target)}))})),["downscale","fov","scale","translate"].forEach((e=>{document.getElementById(e).addEventListener("input",(t=>{const n=t.target;window.dispatchEvent(new CustomEvent(`change${e}`,{detail:n.value}))}))})),this.logElement=document.getElementById("log")}log(e){this.logElement.innerText=e}}},351:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=void 0;const r=n(768);class i{x;y;constructor(e,t){this.x=e,this.y=t}get uniformBuffer(){return(0,r.createUniformBuffer)([this.x,this.y])}static zero=new i(0,0);static one=new i(1,1);static up=new i(0,1);static down=new i(0,-1);static left=new i(-1,0);static right=new i(1,1);toArray(){return[this.x,this.y]}mul(e){if(e instanceof i)return new i(this.x*e.x,this.y*e.y);if("number"==typeof e)return new i(this.x*e,this.y*e);throw new Error("Can only multiply Vector2 by Vector2 or Number")}add(e){return new i(this.x+e.x,this.y+e.y)}subtract(e){return new i(this.x-e.x,this.y-e.y)}normalize(){const e=Math.sqrt(this.x**2+this.y**2);return new i(this.x/e,this.y/e)}negate(){return new i(-this.x,-this.y)}}t.Vector2=i},413:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vector3=void 0;const r=n(768);class i{x;y;z;constructor(e,t,n){this.x=e,this.y=t,this.z=n}get uniformBuffer(){return(0,r.createUniformBuffer)([this.x,this.y,this.z])}static zero=new i(0,0,0);static one=new i(1,1,1);static up=new i(0,1,0);static down=new i(0,-1,0);static left=new i(-1,0,0);static right=new i(1,0,0);toArray(){return[this.x,this.y,this.z]}toString(){return`Vector3(${this.x.toFixed(2)},${this.y.toFixed(2)},${this.z.toFixed(2)})`}mul(e){if(e instanceof i)return new i(this.x*e.x,this.y*e.y,this.z*e.z);if("number"==typeof e)return new i(this.x*e,this.y*e,this.z*e);throw new Error("Can only multiply Vector3 by Vector3 or Number")}add(e){return new i(this.x+e.x,this.y+e.y,this.z+e.z)}subtract(e){return new i(this.x-e.x,this.y-e.y,this.z-e.z)}cross(e){return new i(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}normalize(){const e=Math.sqrt(this.x**2+this.y**2+this.z**2);return new i(0!==this.x?this.x/e:0,0!==this.y?this.y/e:0,0!==this.z?this.z/e:0)}negate(){return new i(-this.x,-this.y,-this.z)}rotateAroundAxis(e,t){const n=Math.cos(t),r=Math.sin(t),o=this.x*(n+(1-n)*e.x*e.x)+this.y*((1-n)*e.x*e.y-r*e.z)+this.z*((1-n)*e.x*e.z+r*e.y),s=this.x*((1-n)*e.y*e.x+r*e.z)+this.y*(n+(1-n)*e.y*e.y)+this.z*((1-n)*e.y*e.z-r*e.x),a=this.x*((1-n)*e.z*e.x-r*e.y)+this.y*((1-n)*e.z*e.y+r*e.x)+this.z*(n+(1-n)*e.z*e.z);return new i(o,s,a)}}t.Vector3=i},110:e=>{e.exports="struct FrustumCornerDirections {\n  topLeft : vec3<f32>,\n  topRight : vec3<f32>,\n  bottomLeft : vec3<f32>,\n  bottomRight : vec3<f32>\n}\n\nfn calculateRayDirection(uv: vec2<f32>, directions: FrustumCornerDirections) -> vec3<f32> {\n  let topInterpolated = mix(directions.topLeft, directions.topRight, uv.x);\n  let bottomInterpolated = mix(directions.bottomLeft, directions.bottomRight, uv.x);\n  let finalInterpolated = mix(bottomInterpolated, topInterpolated, uv.y);\n  return normalize(finalInterpolated);\n}\n\nfn plainIntersect(ro: vec3<f32>, rd: vec3<f32>, p: vec4<f32>) -> f32 {\n    return -(dot(ro, p.xyz) + p.w) / dot(rd, p.xyz);\n}\n\nstruct BoxIntersectionResult {\n    tNear: f32,\n    tFar: f32,\n    normal: vec3<f32>,\n}\n\nfn boxIntersection(\n    ro: vec3<f32>,\n    rd: vec3<f32>,\n    boxSize: vec3<f32>,\n) -> BoxIntersectionResult {\n    var result = BoxIntersectionResult();\n\n    let offsetRayOrigin = ro - boxSize;\n    let m: vec3<f32> = 1.0 / rd;\n    let n: vec3<f32> = m * offsetRayOrigin;\n    let k: vec3<f32> = abs(m) * boxSize;\n\n    let t1: vec3<f32> = -n - k;\n    let t2: vec3<f32> = -n + k;\n\n    let tN: f32 = max(max(t1.x, t1.y), t1.z);\n    let tF: f32 = min(min(t2.x, t2.y), t2.z);\n\n    if (tN > tF || tF < 0.0) {\n        result.tNear = -1.0;\n        result.tFar = -1.0;\n        result.normal = vec3(0.0);\n\n        return result;\n    }\n\n    // Check if the ray starts inside the volume\n    let insideVolume = tN < 0.0;\n\n    var normal = select(\n        step(vec3<f32>(tN), t1),\n        step(t2, vec3<f32>(tF)),\n        tN < 0.0,\n    );\n\n    normal *= -sign(rd);\n\n    // Check if the intersection is in the correct direction, only if inside the volume\n    if (insideVolume && dot(normal, rd) < 0.0) {\n        result.tNear = -1.0;\n        result.tFar = -1.0;\n        result.normal = vec3(0.0);\n        return result;\n    }\n\n\n\n    result.tNear = tN;\n    result.tFar = tF;\n    result.normal = normal;\n\n    return result;\n}\n\n@group(0) @binding(0) var outputTex : texture_storage_2d<rgba8unorm, write>;\n//@group(0) @binding(1) var<uniform> time : u32;\n@group(0) @binding(2) var<uniform> resolution : vec2<u32>;\n@group(0) @binding(3) var<uniform> frustumCornerDirections : FrustumCornerDirections;\n@group(0) @binding(4) var<uniform> cameraPosition : vec3<f32>;\n@group(0) @binding(5) var<uniform> transformationMatrix : mat4x4<f32>;\n\nconst EPSILON = 0.0001;\nconst BORDER_WIDTH = 0.05;\nconst BOUNDS_SIZE = 64.0;\nconst MAX_RAY_STEPS = 256;\n\nfn addVoxelBorderColour(baseColour: vec3<f32>, worldPos: vec3<f32>) -> vec3<f32> {\n  let positionInVoxel = fract(worldPos);\n  let voxelBorder = step(positionInVoxel, vec3(1 - BORDER_WIDTH)) - step(positionInVoxel, vec3(BORDER_WIDTH));\n  let isVoxelBorder = step(length(voxelBorder), 1.0);\n  return mix(baseColour,baseColour * 0.8,isVoxelBorder);\n}\n\nfn addBoundsBorderColour(baseColour: vec3<f32>, worldPos: vec3<f32>) -> vec3<f32> {\n  let positionInBounds = fract(worldPos / BOUNDS_SIZE);\n  let boundsBorderWidth = BORDER_WIDTH / BOUNDS_SIZE * 4.0;\n  let boundsBorder = step(positionInBounds, vec3(1 - boundsBorderWidth)) - step(positionInBounds, vec3(boundsBorderWidth));\n  let isBoundsBorder = step(length(boundsBorder), 1.0);\n  return mix(baseColour,vec3(1.0,0.0,1.0),isBoundsBorder);\n}\n\nfn sampleVoxel(position: vec3<f32>) -> bool {\n  let layer1 = (sin(position.x * 0.25) - sin(position.z * 0.25)) * 2;\n  let layer2 = (sin(position.x * 0.125) - sin(position.z * 0.125)) * 4;\n  let isSolidVoxel = layer1 + layer2 > (position.y - 32);\n  return isSolidVoxel;\n}\n\n@compute @workgroup_size(8, 8, 1)\nfn main(\n  @builtin(global_invocation_id) GlobalInvocationID : vec3<u32>\n) {\n  var voxelSize = 1.0;\n  let pixel = vec2<f32>(f32(GlobalInvocationID.x), f32(resolution.y - GlobalInvocationID.y));\n  let uv = pixel / vec2<f32>(resolution);\n  var rayOrigin = cameraPosition;\n  var rayDirection = calculateRayDirection(uv,frustumCornerDirections);\n  var boxSize = vec3<f32>(BOUNDS_SIZE);\n  var colour = sample_sky(rayDirection);\n  let plainIntersection = plainIntersect(rayOrigin, rayDirection, vec4<f32>(0.0, 1.0, 0.0, 0.0));\n  if(plainIntersection > 0.0){\n    let worldPos = plainIntersection * rayDirection + rayOrigin;\n    var borderColour = addVoxelBorderColour(colour, worldPos * 0.25);\n    colour = borderColour;\n  }\n\n  // Transform the ray using the combined matrix\n  rayOrigin = (transformationMatrix * vec4<f32>(rayOrigin, 1.0)).xyz;\n  //  rayOrigin = rayOrigin + translationVector;\n  rayDirection = (transformationMatrix * vec4<f32>(rayDirection, 0.0)).xyz;\n\n  let intersect = boxIntersection(rayOrigin, rayDirection, boxSize * 0.5);\n\n  let tNear = intersect.tNear;\n  let boundingBoxSurfacePosition = rayOrigin + (tNear + EPSILON)  * rayDirection;\n  let isStartingInBounds = all(boundingBoxSurfacePosition > vec3(0.0)) && all(boundingBoxSurfacePosition < vec3(BOUNDS_SIZE / voxelSize));\n  if(tNear > 0.0 || isStartingInBounds){\n    var pos = boundingBoxSurfacePosition;\n    var normal = vec3(0.0);\n    var stepsTaken = 0;\n    var voxelStep = sign(rayDirection);\n    var tIntersection = 0.0;\n    var tDelta = vec3(voxelSize / abs(rayDirection));\n    var scaledStartingPoint = pos / voxelSize;\n    var scaledRayOrigin = vec3<f32>(rayOrigin) / voxelSize;\n    var currentIndex = floor(scaledStartingPoint);\n    var voxelOriginDifference = vec3<f32>(currentIndex) - scaledRayOrigin;\n    var clampedVoxelBoundary = (voxelStep * 0.5) + 0.5; // 0 if <= 0, 1 if > 0\n    var tMax = (voxelStep * voxelOriginDifference + clampedVoxelBoundary) * tDelta + EPSILON;\n    var occlusion = false;\n\n    while(stepsTaken <= MAX_RAY_STEPS)\n    {\n      tIntersection = min(min(tMax.x, tMax.y), tMax.z);\n      let mask = vec3(\n          select(0.0, 1.0, tMax.x == tIntersection),\n          select(0.0, 1.0, tMax.y == tIntersection),\n          select(0.0, 1.0, tMax.z == tIntersection)\n      );\n      tMax += mask * tDelta;\n      currentIndex += mask * voxelStep;\n      normal = vec3(mask * -voxelStep);\n      pos = rayOrigin + rayDirection * tIntersection;\n      stepsTaken ++;\n      let isInBounds = all(currentIndex > vec3(0.0)) && all(currentIndex < vec3(BOUNDS_SIZE / voxelSize));\n      if(!isInBounds){\n          break;\n      }\n      if(sampleVoxel(currentIndex)){\n          occlusion = true;\n          break;\n      }\n    }\n\n//    if(occlusion){\n      colour = normal;\n      colour = addVoxelBorderColour(colour, pos);\n//    }\n    colour = addBoundsBorderColour(colour, boundingBoxSurfacePosition);\n\n  }\n  textureStore(outputTex, GlobalInvocationID.xy, vec4(colour,1));\n}\n"},144:e=>{e.exports="@group(0) @binding(0) var mySampler : sampler;\n@group(0) @binding(1) var myTexture : texture_2d<f32>;\n\nstruct VertexOutput {\n  @builtin(position) Position : vec4<f32>,\n  @location(0) fragUV : vec2<f32>,\n}\n\n@vertex\nfn vertex_main(@builtin(vertex_index) VertexIndex : u32) -> VertexOutput {\n  const pos = array(\n    vec2( 1.0,  1.0),\n    vec2( 1.0, -1.0),\n    vec2(-1.0, -1.0),\n    vec2( 1.0,  1.0),\n    vec2(-1.0, -1.0),\n    vec2(-1.0,  1.0),\n  );\n\n  const uv = array(\n    vec2(1.0, 0.0),\n    vec2(1.0, 1.0),\n    vec2(0.0, 1.0),\n    vec2(1.0, 0.0),\n    vec2(0.0, 1.0),\n    vec2(0.0, 0.0),\n  );\n\n  var output : VertexOutput;\n  output.Position = vec4(pos[VertexIndex], 0.0, 1.0);\n  output.fragUV = uv[VertexIndex];\n  return output;\n}\n\n@fragment\nfn fragment_main(@location(0) fragUV : vec2<f32>) -> @location(0) vec4<f32> {\n//    return vec4(sin(f32(time) * 0.001), 0, 0, 1);\n    return textureSample(myTexture, mySampler, fragUV);\n}\n"},693:e=>{e.exports="// Function to mimic the ease_out_expo function\nfn ease_out_expo(x: f32) -> f32 {\n    let t: f32 = x;\n    let b: f32 = 0.0;\n    let c: f32 = 1.0;\n    let d: f32 = 1.0; // Set the duration within the function\n\n    let intermediate_result: f32 = c * (-pow(2.0, -10.0 * t / d) + 1.0) + b;\n\n    return select(intermediate_result, b + c, t == d);\n\n}\n\nfn sample_sky(rayDirection: vec3<f32>) -> vec3<f32> {\n    //TODO: add this to uniforms\n    let lightDirection = normalize(vec3(1.0,1.0,0.));\n    let y = clamp(ease_out_expo(rayDirection.y * 0.66), 0.0, 1.0);\n//    let y = rayDirection.y;\n    let sunHeight = clamp(lightDirection.y, 0.0, 1.0);\n    let horizon = mix(vec3<f32>(0.95, 0.5, 0.4), vec3<f32>(0.6, 0.8, 1.0), sunHeight);\n    let sky = mix(vec3<f32>(0.55, 0.7, 0.7), vec3<f32>(0.3, 0.6, 0.95), sunHeight);\n    let sunFalloff = 0.8;\n    let sunAmount = 1.0 - ease_out_expo(length(lightDirection - rayDirection) * sunFalloff);\n//    let sunAmount = 1.0 - length(lightDirection - rayDirection) * sunFalloff;\n    let skyColour = mix(horizon, sky, y);\n    let sunColour = mix(vec3<f32>(1.8, 1.6, 1.1), vec3<f32>(1.6, 1.6, 1.4), sunHeight);\n\n    let intensity = clamp(sunHeight, 0.75, 1.0);\n    return mix(skyColour, sunColour, clamp(sunAmount, 0.0, 1.0)) * intensity;\n}"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(752)})();