(()=>{var e,t,i={284:(e,t,i)=>{"use strict";var r=i(491),n=i(590),o=i(391),s=i.n(o),a=i(627);const l=s()("crystals"),c=(0,a.Cf)(l);class h{cache;size;noiseFunction;constructor(e,t){this.size=t,this.noiseFunction=e,this.cache=new Int16Array(t[0]*t[1]*t[2])}get([e,t,i]){const r=(n=this.size,(o=[e,t,i])[0]+o[1]*n[0]+o[2]*(n[0]*n[1]));var n,o,s;return 0===this.cache[r]&&(this.cache[r]=(s=this.noiseFunction(e,t,i),Math.floor(32767*s))),(e=>e/32767)(this.cache[r])}}let d,u;const f={createOctreeAndReturnBytes:(e,t,i)=>(u=new h(((t,i,r)=>((e,t,i,r=1,n=3,o=.5)=>{let s=0,a=0,l=1;for(let h=0;h<n;h++){const n=1<<h;a+=c(e*n*r,t*n*r,i*n*r)*l,s+=l,l*=o}return a/s})(t+e[0],i+e[1],r+e[2],.001,5)),t),d=new r.xV(((e,t,i)=>((e,t,i)=>{const r=t/128,n=function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}((u.get([e,t,i])+1)/2),o=l();return n>r?t>96?{red:255-128*o,green:0,blue:0}:t>70.4?{red:255-128*o,green:255-128*o,blue:0}:t>32?{red:0,green:255-128*o,blue:0}:{red:64,green:64,blue:255-128*o}:null})(e,t,i)),((e,t,i)=>1),Math.max(...t),i),u=void 0,d.totalSize+r.ps),populateOctreeBuffer:e=>{const t=new DataView(e);d.nodes.forEach(((e,i)=>{"red"in e?(0,r.lx)(t,i,e):(0,r.Ie)(t,i,e)})),d=void 0}};(0,n.p)(f)},491:(e,t,i)=>{"use strict";i.d(t,{ps:()=>r,xV:()=>o,Ie:()=>a,lx:()=>s});const r=8,n=e=>[1&e?1:0,2&e?1:0,4&e?1:0];class o{nodes;#e;#t;#i;#r;constructor(e,t,i,r){this.nodes=[],this.#e=0,this.#r=new DataView(r),this.#t=e,this.#i=t,this.#n(i,0,[0,0,0])}#o(e=8){return this.#e+=e,this.#e-(e-1)}#n(e,t,i){if(e<=this.#i(i[0],i[1],i[2])){const r=this.#t(i[0],i[1],i[2]),{red:n,green:o,blue:a}=r,l={red:n,green:o,blue:a,x:i[0],y:i[1],z:i[2],size:e};return void s(this.#r,t,l)}const r=Array.from({length:8},(()=>0)),o=(l=e,Math.pow(2,Math.ceil(Math.log2(l))));var l;const c=o/2;for(let e=0;e<8;e++){const t=n(e),o=i[0]+t[0]*c,s=i[1]+t[1]*c,a=i[2]+t[2]*c;for(let t=o;t<o+c;t++)for(let i=s;i<s+c;i++)for(let n=a;n<a+c;n++)this.#t(t,i,n)&&r[e]++}let h=0;const d=r.reduce(((e,t,i)=>t>0?(h=i+1,e|1<<i):e),0);if(r.reduce(((e,t)=>e+t),0)===o**3){const r=i.map((e=>e+o/2)),{red:n,green:a,blue:l}=this.#t(r[0],r[1],r[2]),c={red:n,green:a,blue:l,x:i[0],y:i[1],z:i[2],size:e};return void s(this.#r,t,c)}const u=this.#o(h),f=u-t;r.forEach(((e,t)=>{if(e){const e=u+t,r=n(t),o=i[0]+r[0]*c,s=i[1]+r[1]*c,a=i[2]+r[2]*c;this.#n(c,e,[o,s,a])}}));const p={firstChildIndex:f,childMask:d,x:i[0],y:i[1],z:i[2],size:o,leafMask:0};a(this.#r,t,p)}get totalSize(){return this.#e*r}}const s=(e,t,i)=>{e.setUint8(t*r,0),e.setUint8(t*r+1,i.x),e.setUint8(t*r+2,i.y),e.setUint8(t*r+3,i.z),e.setUint8(t*r+4,i.red),e.setUint8(t*r+5,i.green),e.setUint8(t*r+6,i.blue),e.setUint8(t*r+7,Math.log2(i.size))},a=(e,t,i)=>{console.assert(i.firstChildIndex<2**24-1,`First child index of ${i.firstChildIndex} is too large to fit in 3 bytes`),console.assert(i.x<256,`X position of ${i.x} is too large to fit in 1 byte`),console.assert(i.y<256,`Y position of ${i.y} is too large to fit in 1 byte`),console.assert(i.z<256,`Z position of ${i.z} is too large to fit in 1 byte`),e.setUint8(t*r,i.childMask),e.setUint8(t*r+1,i.x),e.setUint8(t*r+2,i.y),e.setUint8(t*r+3,i.z),e.setUint32(t*r+4,i.firstChildIndex,!0),e.setUint8(t*r+7,Math.log2(i.size))}},234:()=>{}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={id:e,loaded:!1,exports:{}};return i[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=i,n.x=()=>{var e=n.O(void 0,[974],(()=>n(284)));return n.O(e)},n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},e=[],n.O=(t,i,r,o)=>{if(!i){var s=1/0;for(h=0;h<e.length;h++){for(var[i,r,o]=e[h],a=!0,l=0;l<i.length;l++)(!1&o||s>=o)&&Object.keys(n.O).every((e=>n.O[e](i[l])))?i.splice(l--,1):(a=!1,o<s&&(s=o));if(a){e.splice(h--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var h=e.length;h>0&&e[h-1][2]>o;h--)e[h]=e[h-1];e[h]=[i,r,o]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>e+".main.js",n.miniCssF=e=>{},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={365:1};n.f.i=(t,i)=>{e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunksoulflame_webgpu=self.webpackChunksoulflame_webgpu||[],i=t.push.bind(t);t.push=t=>{var[r,o,s]=t;for(var a in o)n.o(o,a)&&(n.m[a]=o[a]);for(s&&s(n);r.length;)e[r.pop()]=1;i(t)}})(),t=n.x,n.x=()=>n.e(974).then(t),n.x()})();